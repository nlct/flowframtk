
\usepackage{fontspec}
\setmainfont{Linux Libertine O}
\usepackage{verbatim}
\usepackage{longtable}
\usepackage{booktabs}
\PassOptionsToPackage{prefix}{glossaries-extra}
\usepackage
 [
    novref,
    fnsymleft,
%   debug=showwrgloss
 ]{texjavahelp}

\hypersetup{colorlinks,linkcolor=blue}

\newcommand{\appname}{FlowframTk}

\title{User Manual for \appname}
\author{Nicola L.C. Talbot\\\href{https://www.dickimaw-books.com/}{\nolinkurl{dickimaw-books.com}}}

\InputIfFileExists{version}{}{}

\GlsXtrLoadResources[src={flowframtk,shared,\langbibsrcs},
 \TeXJavaHelpSymbolResourceOptions
]

\GlsXtrLoadResources[src={flowframtk,shared,\langbibsrcs},
 \TeXJavaHelpGlsResourceOptions
]

\begin{document}
\maketitle
\frontmatter
\tableofcontents
%\listoffigures

\chapter*{Notes}

\appname\ is licensed under the terms of the GNU General Public License
(\url{http://gnu.org/licenses/gpl.html"}).
See \sectionref{sec:licence}.

DOCUMENTATION IS PROVIDED \qt{AS IS} AND ALL EXPRESS OR IMPLIED
CONDITIONS, REPRESENTATIONS AND WARRANTIES, INCLUDING ANY
IMPLIED WARRANTY OF MERCHANTABILITY, FITNESS FOR A PARTICULAR
PURPOSE OR NON-INFRINGEMENT, ARE DISCLAIMED, EXCEPT TO THE EXTENT THAT
SUCH DISCLAIMERS ARE HELD TO BE LEGALLY INVALID.

This document is a user manual for \appname. For information about
JDRView or jdrutils, see \filefmt{jdrview.pdf} or
\filefmt{jdrutils.pdf}, respectively.

\IfTeXParserLib
  {%
    This manual is also available as a PDF document, \filefmt{flowframtk.pdf}. 
  }
  {}

The latest version of \appname\ can be downloaded from
\url{https://ctan.org/pkg/flowframtk}.
Older versions can be downloaded from
\url{http://www.dickimaw-books.com/software/flowframtk/}.
The source code is in the GitHub repository
\url{https://github.com/nlct/flowframtk}.

Occasionally the canvas doesn't get redrawn correctly. To force a
redraw, use \accelerator{menu.debug.revalidate}.


\mainmatter
\chapter{Introduction}
\label{sec:introduction}

\appname\ (formerly \gls{JpgfDraw})
is a \gls{vectorgraphics} application written in \gls{Java}, with a 
\gls{gui}.  The main purpose of \appname\ is to generate \LaTeX\ packages or 
classes that use the \sty{flowfram} package, and to generate
\sty{pgf} picture drawing code. As a side-effect, it can also be
used to generate \gls{parshape} and (\sty{shapepar} package) \gls{shapepar} or 
\gls{Shapepar} specifications. In order to run the application you 
must have the \gls{jre} installed.

In \appname, you can:

\begin{itemize}
  \item construct shapes using line, move and cubic BÃ©zier segments
(\sectionref{sec:newobjects});

  \item edit paths by modifying the defining \glspl{controlpt}
  (\sectionref{sec:editpath});

  \item incorporate text (\sectionref{sec:newtext}) and 
  bitmap images (\sectionref{sec:insertbitmap})
  for annotating and background effects;

  \item combine text and a path to form a text-along-path
  effect (\sectionref{sec:textpath});

  \item apply replicas to a shape to form patterns
  (\sectionref{sec:patterns});

  \item extract the parameter's for \TeX's \gls{parshape} command and for 
  the \gls{shapepar} (or \gls{Shapepar}) command defined in the
  \sty{shapepar} package;

  \item construct frames for use with the \sty{flowfram} package
  (\sectionref{sec:flowframe}).
\end{itemize}

Pictures can be saved as (\sectionref{sec:saveimage}) or loaded
(\sectionref{sec:loadimage}) from \appname's native \gls{JDR}
(binary) or \gls{AJR} (ASCII) file formats. Additionally, images can be
exported (\sectionref{sec:exportimage}) as:

\begin{itemize}
    \item a \LaTeX\ file containing a \env{pgfpicture} environment
    for inclusion in a \LaTeX\ document;

    \item a single-paged complete \LaTeX\ document containing the image
    (either just encapsulating the image or with the page set to the
    same size as the \gls{canvas});

    \item a \LaTeX\ package or class that loads the \sty{flowfram} package;

    \item a PNG file;

    \item a PostScript file;

    \item \pgls{svg} file.
\end{itemize}

Note that the export to PS/PDF/SVG functions use external
processes, such as \app{latex} and \app{dvips}.
\strong{You can't import back from the files you can export to.}

The low-level \sty{pgf} basic layer commands are used during
exports to \LaTeX\ files. These commands aren't particularly easy to
read but are faster to compile than the higher-level commands that
require extra processing to parse the syntax and perform additional
calculations. The primary purpose of \appname\ is to provide a
graphical interface that can generate complicated code that's hard
to write manually.

\appname\ was tested with version 3.0.0 of the \sty{pgf}
package, version 1.16 of the \sty{flowfram} package and version
2.2 of the \sty{shapepar} package. Files created by \appname\
may not work with earlier versions of those packages. Note that some
DVI viewers may not understand PGF specials. I strongly recommend
that you read the user manuals for those packages.


Notation: a \gls{primaryclick} is a single click with the
\gls{primary-mouse-button}. This is typically the left button for a
right-handed mouse (or left side of a trackpad), but may be the
right button for a left-handed mouse. A \gls{menuclick} is a click
with the context-menu mouse button. This button depends on your
configuration, but is typically the right button for a right-handed
two-button mouse (and vice-versa for a left-handed two-button mouse). 
If the button isn't mentioned, a~\gls{click} can
be assumed to mean a~\gls{primaryclick}.

\chapter{Installation}
\label{install}

Ensure that you have the \gls{jre} installed.
This can be downloaded from \url{http://java.sun.com/j2se/}.
You must ensure that you use at least Java~8, as \appname\
does not work with earlier versions.

To install, download the installer
\metafilefmt{flowframtk-}{appversion}{-installer.jar}
(where \meta{appversion} is the application version) and run it. 
This can be done from a terminal or command prompt using:

\begin{terminal}
java -jar flowframtk-\meta{appversion}-installer.jar
\end{terminal}

Depending on the setup of your operating system, you may also be
able to \gls{doubleclick} on the \ext{jar} file to run it.


\chapter{Accessibility}
\label{access}

Most of \appname's mouse functions can be emulated using the
keyboard, however note that some systems do not allow applications
to move the pointer, so keyboard functions that move the pointer are
not guaranteed to work on every system. Keyboard accelerators and
their menu mnemonic equivalents are listed in \tableref{tab:access}.
These accelerators may be changed using the \dialog{accelerators}
tab in the \dialog{configui} window (see
\sectionref{sec:configureuidialog}).  \accelerator{menubarfocus}
switches the focus to the menu bar. The return \keys{\keyref{return}}
key will usually be equivalent to the \widget{okay} button
except when the focus is with a component that interprets
\keys{\keyref{return}} for some other purpose (such as
a~\gls{dropdown}), in which case you need to use \accelerator{okay}.

Within editable text fields, you can use \keys{\keyref{ctrl}+A} to
select all the text, or shift \keys{\keyref{shift}} followed by
the left \keys{\keyref{left}} or right \keys{\keyref{right}} arrow
key to select a portion of the text. If some of the text has been
selected, you can use \keys{\keyref{ctrl}+C} or
\keys{\keyref{ctrl}+X} to copy or cut the text onto the clipboard,
and you can use \keys{\keyref{ctrl}+V} to paste text from the
clipboard into the text field.

\begin{warning}
Note that a few of the accelerators previously used by \gls{JpgfDraw} have
been changed in \appname, as they caused a conflict. For example,
\keys{\keyref{escape}} cancels a displayed menu, so if you use it to
dismiss a menu while you had a \gls{path} under construction, the
entire path could be discarded, which is undesirable. Therefore the
abandon path accelerator is now \accelerator{tools.abandon}. The
\accelerator{help.manual} key is now only for the main manual help
button. The help buttons in dialog windows and the preamble editor
are activated with \accelerator{help} and the help button in the
status bar is activated with \accelerator{contexthelp} (otherwise
the main help button, preamble editor help button and status bar
help button would conflict).
\end{warning}

\seealsorefs{sec:configureuidialog,sec:selectobjects,sec:newobjects,sec:accesstutorial}

\begin{longtable}{lp{0.5\textwidth}p{0.2\textwidth}}
\caption{Keyboard Accelerators and Menu Mnemonics\label{tab:access}}\\
\bfseries Accelerator & \bfseries Function & \bfseries Mnemonic \\
\endfirsthead
\caption*{Keyboard Accelerators and Menu Mnemonics (Continued)}\\
\bfseries Accelerator & \bfseries Function & \bfseries Mnemonic \\
\endhead
\multicolumn{3}{l}{\fnsymtext{2}{Functions that move the pointer.}}\\\endfoot
\keys{\keyref{return}} &
Finish current \gls{path}/\gls{textarea} & 
\mnemonictrail{tools.finish}\tabularnewline
& 
\emph{or} select \widget{okay} button in dialog boxes &
\mnemonic{okay}\tabularnewline
%
& 
\emph{or} select \widget{close} button in dialog boxes &
\mnemonic{close}\tabularnewline
%
\accelerator{okay} &
Select \widget{okay} button in dialog boxes &
\mnemonic{okay}\tabularnewline
%
\accelerator{tools.abandon} &
Abandon current \gls{path} &
\mnemonictrail{tools.abandon}\tabularnewline
%
\keys{\keyref{escape}} &
Select \widget{cancel} button in dialog boxes &
\mnemonic{cancel}\tabularnewline
%
 & 
\emph{or} close displayed menu &
\tabularnewline
%
\accelerator{editpath.delete_control} & 
Delete selected \gls{controlpt} &
\accelerator{contextmenu} \mnemonic{editpath.delete_control}
\tabularnewline
%
\accelerator{delete_last} &
Delete last segment (path construction mode) &
\tabularnewline
%
\keys{\keyref{insert}} &
Add \gls{controlpt} &
\accelerator{contextmenu} \mnemonic{editpath.add_control}
\tabularnewline
&
\emph{or} display symbol dialog box &
\accelerator{contextmenu} \mnemonic{textarea.insert_symbol}
\tabularnewline
%
\accelerator{focusnext} &
Move focus to next focusable component &
\tabularnewline
%
\accelerator{focusselect} &
Select component with current focus &
\tabularnewline
\midrule
%
\keys{\keyref{pageup}} &
Scroll up by one screen full &
\tabularnewline
%
\keys{\keyref{pagedown}} &
Scroll down by one screen full &
\tabularnewline
%
\keys{\keyref{ctrl}+\keyref{pagedown}} &
If in a tabbed pane: &
\tabularnewline
&
\leftquadpar{Move to the next tab} &
\tabularnewline
&
Otherwise: &
\tabularnewline
&
\leftquadpar{Scroll right by one screen full} &
\tabularnewline
%
\keys{\keyref{ctrl}+\keyref{pageup}} &
If in a tabbed pane: &
\tabularnewline
&
\leftquadpar{Move to the previous tab} &
\tabularnewline
 &
 Otherwise: &
\tabularnewline
&
\leftquadpar{Scroll left by one screen full} &
\tabularnewline
%
Arrow Keys &
If \gls{primary-mouse-button} is pressed: &
\tabularnewline
 &
 \leftquadpar{\fnsym{2}Move mouse by one pixel in given direction} &
\tabularnewline
 &
Otherwise: &
\tabularnewline
 &
\leftquadpar{Scroll by one tick mark in given direction} &
\tabularnewline
%
\keys{\keyref{home}} &
Scroll to the top of the \gls{canvas} &
\tabularnewline
%
\keys{\keyref{end}} &
Scroll to the bottom of the \gls{canvas} &
\tabularnewline
%
\keys{\keyref{ctrl}+\keyref{home}} &
Scroll leftmost &
\tabularnewline
%
\keys{\keyref{ctrl}+\keyref{end}} &
Scroll rightmost &
\tabularnewline
\midrule
%
\accelerator{help.manual} &
Display Handbook &
\mnemonictrail{help.manual}
\tabularnewline
\accelerator{settings.grid.show} &
Show/hide \gls{grid} &
\mnemonictrail{settings.grid.show}
\tabularnewline
\accelerator{contextmenu} &
Show context \gls{popupmenu} (if available) &
\tabularnewline
%
\accelerator{constructclick} &
Emulate \gls{primaryclick} in \gls{construction} &
\tabularnewline
%
\accelerator{navigate.goto} &
 \fnsym{2}Go to coordinate &
\mnemonictrail{navigate.goto}
\tabularnewline
%
\keys{\actualkey{F6}} &
Select mode: &
\tabularnewline
 &
 \leftquadpar{Deselect the \glsdisp{backobject}{backmost} selected 
  \gls{object}, and select next object in the \gls{stack}} &
\mnemonictrail{navigate.skip}
\tabularnewline
&
Edit mode: &
\tabularnewline
&
\leftquadpar{Select next \gls{controlpt}} &
\accelerator{contextmenu} \mnemonic{editpath.next_control}
\tabularnewline
%
\keys{\actualkey{F7}} &
Select mode: &
\tabularnewline
 &
\leftquadpar{Move selected \gls{object}} &
\mnemonictrail{edit.moveby}
\tabularnewline
 &
 Edit mode: &
\tabularnewline
 &
\leftquadpar{Move selected \gls{controlpt}} &
\accelerator{contextmenu} \mnemonic{editpath.coordinates}
\tabularnewline
%
\accelerator{edit.undo} &
Undo &
\mnemonictrail{edit.undo} \tabularnewline
%
\accelerator{edit.redo} &
Redo &
\mnemonictrail{edit.redo}
\tabularnewline
%
\accelerator{menubarfocus} &
Switch focus to menu bar &
\tabularnewline
%
\accelerator{menu.debug.revalidate} &
Repaint canvas &
\tabularnewline
%
\accelerator{contexthelp} &
Display current tool help (status bar help button) &
\tabularnewline
%
\accelerator{menu.debug.dumpall} &
Saves all images to the \gls{config_dir} &
\tabularnewline
%
\accelerator{help} &
Display subject help (help buttons in dialog windows or preamble
editor) &
\tabularnewline
\accelerator{settings.grid.lock} &
Lock/unlock grid &
\mnemonictrail{settings.grid.lock}
\tabularnewline
%
\accelerator{navigate.select} &
Select next \gls{object} in the \gls{stack} (from the
\gls{front}), and deselect all others &
\mnemonictrail{navigate.select} \tabularnewline
%
\keys{\actualkey{F6}} &
Select mode: &
\tabularnewline
&
\leftquadpar{Add next \gls{object} in the \gls{stack}
     (from the \gls{front}) to selection} &
\mnemonictrail{navigate.add_next}
\tabularnewline
 &
Edit mode: &
\tabularnewline
%
 &
\leftquadpar{Select previous \gls{controlpt}} &
\accelerator{contextmenu} \mnemonic{editpath.prev_control}
\tabularnewline
%
\accelerator{navigate.find} &
\fnsym{2}Find selected \gls{object} &
\mnemonictrail{navigate.find}
\tabularnewline
%
\accelerator{menu.debug.objectinfo} &
Displays debugging information &
\tabularnewline
%
\accelerator{menu.debug.writelog} &
Writes log file in the \gls{config_dir} &
\tabularnewline
\accelerator{close_window} &
Quit &
\mnemonictrail{file.quit}
\tabularnewline
\midrule
%
\accelerator{edit.select_all} &
Select all \gls{object} &
\mnemonictrail{edit.select_all}
\tabularnewline
%
\accelerator{edit.back} &
Move selected \gls{object} to the \gls{back} &
\mnemonictrail{edit.back}
\tabularnewline
%
\accelerator{edit.copy} &
Copy selected \gls{object} to clipboard &
\mnemonictrail{edit.copy}
\tabularnewline
%
\accelerator{transform.convert} &
Convert outline to a \gls{path} &
\mnemonictrail{transform.convert}
\tabularnewline
%
\accelerator{tools.ellipse} &
Switch to ellipse tool &
\mnemonictrail{tools.ellipse}
\tabularnewline
%
\keys{\keyref{ctrl}+\actualkey{F}} &
Select mode: &
\tabularnewline
 &
\leftquadpar{Move selected \gls{object} to the \gls{front}} &
\mnemonictrail{edit.front}
\tabularnewline
 & \TeX\ editor: &
\tabularnewline
 &
\leftquadpar{Find text} &
\mnemonic{texeditor.search.find}
\tabularnewline
\keys{\keyref{ctrl}+\actualkey{G}} &
Select mode: &
\tabularnewline
 &
\leftquadpar{Group selected \gls{object}} &
\mnemonictrail{transform.group}
\tabularnewline
 &
\TeX\ editor: &
\tabularnewline
 &
\leftquadpar{Find again} &
\mnemonic{texeditor.search.find_again}
\tabularnewline
\keys{\keyref{ctrl}+\actualkey{H}} &
Select mode: &
\tabularnewline
 &
\leftquadpar{Shear selected \gls{object}} &
\mnemonictrail{transform.shear}
\tabularnewline
 &
\TeX\ editor: &
\tabularnewline
 &
\leftquadpar{Find and Replace text} &
\mnemonictrail{texeditor.search.replace}
\tabularnewline
%
\accelerator{edit.path.edit} &
Edit selected \gls{path} &
\mnemonictrail{edit.path.edit}
\tabularnewline
%
\accelerator{transform.merge} &
Merge selected \gls{path} &
\mnemonictrail{transform.merge}
\tabularnewline
%
\accelerator{tools.open_curve} &
Switch to open curve tool &
\mnemonictrail{tools.open_curve}
\tabularnewline
%
\accelerator{tools.open_line} &
Switch to open line tool &
\mnemonictrail{tools.open_line}
\tabularnewline
%
\accelerator{tools.gap} &
Gap function &
\mnemonictrail{tools.gap}
\tabularnewline
%
\accelerator{file.new} &
New canvas &
\mnemonictrail{file.new}
\tabularnewline
%
\accelerator{file.open} &
Open \gls{JDR} or \gls{JDR} file &
\mnemonictrail{file.open}
\tabularnewline
%
\accelerator{tools.select} &
Switch to select tool &
\mnemonictrail{tools.select}
\tabularnewline
%
\accelerator{file.quit} &
Quit &
\mnemonictrail{file.quit}
\tabularnewline
%
\accelerator{tools.rectangle} &
Switch to rectangle tool &
\mnemonictrail{tools.rectangle}
\tabularnewline
%
\accelerator{file.save} &
Save current image &
\mnemonictrail{file.save}
\tabularnewline
%
\accelerator{tools.textarea} &
Switch to text tool &
\mnemonictrail{tools.textarea}
\tabularnewline
%
\accelerator{transform.ungroup} &
Ungroup selected \gls{group} &
\mnemonictrail{transform.ungroup}
\tabularnewline
%
\accelerator{edit.paste} &
Paste \gls{object} from clipboard &
\mnemonictrail{edit.paste}
\tabularnewline
%
\accelerator{transform.rotate} &
Rotate selected \gls{object} &
\mnemonictrail{transform.rotate}
\tabularnewline
%
\accelerator{edit.cut} &
Cut selected \gls{object} &
\mnemonictrail{edit.cut}
\tabularnewline
%
\accelerator{edit.path.style.all} &
Edit the selected paths' line styles &
\mnemonictrail{edit.path.style.all}
\tabularnewline
%
\accelerator{transform.scale} &
Scale selected \gls{object} &
\mnemonictrail{transform.scale}
\tabularnewline
%
\accelerator{edit.deselect_all} &
Deselect all &
\mnemonictrail{edit.deselect_all}
\tabularnewline
%
\accelerator{edit.movedown} &
Move selected \gls{object} down the \gls{stack} &
\mnemonictrail{edit.movedown}
\tabularnewline
%
\accelerator{edit.moveup} &
Move selected \gls{object} up the \gls{stack} &
\mnemonictrail{edit.moveup}
\tabularnewline
%
\accelerator{edit.textarea.edit} &
Edit selected text &
\mnemonictrail{edit.textarea.edit}
\tabularnewline
%
\accelerator{tools.closed_curve} &
Switch to closed curve tool &
\mnemonictrail{tools.closed_curve}
\tabularnewline
%
\accelerator{tools.closed_line} &
Switch to closed line tool &
\mnemonictrail{tools.closed_line}
\tabularnewline
%
\accelerator{tools.math} &
Switch to \dgls{maths-mode} tool &
\mnemonictrail{tools.math}
\tabularnewline
\midrule
%
\keys{\actualkey{1}}\ldots\keys{\actualkey{8}} &
Linear gradient paint direction selectors &
\tabularnewline
%
\keys{\actualkey{1}}\ldots\keys{\actualkey{9}} &
Radial gradient paint start location selectors &
\end{longtable}


\chapter{Settings}\label{sec:settings}

You can customise the appearance of \appname's main window either
using the command line arguments (\sectionref{sec:cmdargs}) or
using the settings menu (\sectionref{sec:settingsmenu}).

\section{Command Line Arguments}\label{sec:cmdargs}

\appname\ can be invoked from a command prompt. 

\appdef{flowframtk}

Depending on your installation, this command may run a bash script
(which will run the application \ext{jar} file) or this command may
be an executable form of the application \ext{jar} file.
The application \ext{jar} file is called \file{flowframtk.jar}
and may also be invoked from the command line explicitly:
\begin{terminal}
java -jar path/to/\file{flowframtk.jar}
\end{terminal}
where \filefmt{path/to/} is the path to the \file{flowframtk.jar}
file.

Note that the options and the filenames may be omitted.
Each filename must be either a \gls{JDR} or an \gls{AJR} file.
The \app{flowframtk} bash script uses the environment variable 
\inlineglsdef{JDR_JVMOPTS} to pass
options to the \gls{jvm}.  For example, if you want to run \appname\ with
a maximum size of 128Mb for the memory allocation pool, you can set
\gls{JDR_JVMOPTS} to \verb|-Xmx128m|:
\begin{terminal}
setenv \gls{JDR_JVMOPTS} -Xmx128m
\end{terminal}
The \app{flowframtk} script also uses the environment variable
\inlineglsdef{FLOWFRAMTK_OPTS} to pass options to \appname.

\begin{information}
If you have previously used \gls{JpgfDraw}, the \inlineglsdef{JPGFDRAW_OPTS} 
environment variable will also be recognised, but any settings in 
\gls{FLOWFRAMTK_OPTS} will override those in \gls{JPGFDRAW_OPTS}.
\end{information}

For example, if you always want \appname\ to start up with the grid showing,
 you can set \gls{FLOWFRAMTK_OPTS} to \switch{show_grid}:
\begin{terminal}
setenv \gls{FLOWFRAMTK_OPTS} \switch{show_grid}
\end{terminal}
(Bear in mind that \gls{JDR} and \gls{AJR} files can have certain
settings saved, which may override the startup settings.)

\begin{important}
Note that these environment variables only have an effect if you
use the \app{flowframtk} script to run the \gls{jre}.
\end{important}

Available command line options are listed below.
Older versions of \appname\ had switches prefixed with a single
hyphen (such as \shortargfmt{help}). These are still supported for
backward-compatibility but double-hyphen versions are now provided
(such as \longargfmt{help}).

\switchdef{show_grid}
Show the \gls{grid}.

\switchdef{noshow_grid}
Don't show the \gls{grid}.

\switchdef{lock_grid}
Lock the \gls{grid}.

\switchdef{nolock_grid}
Don't lock the \gls{grid}.

\switchdef{toolbar}
Show the \glspl{toolbar}.

\switchdef{notoolbar}
Don't show the \glspl{toolbar}.

\switchdef{statusbar}
Show the \gls{statusbar}.

\switchdef{nostatusbar}
Don't show the \gls{statusbar}.

\switchdef{ruler}
Show the \glspl{ruler}.

\switchdef{noruler}
Don't show the \glspl{ruler}.

\switchdef{paper}
Set the paper size. The argument may be a single keyword that
identifies a recognised paper size or, for a custom size, the
argument may be the keyword \optfmt{user} followed by the width and
height. For example:
\begin{terminal}
\app{flowframtk} \switch{paper} user 100mm 200mm
\end{terminal}

The custom size must have positive dimensions.
Recognised units: \code{\gls{pt}}, \code{\gls{bp}},
\code{in}, \code{mm}, \code{cm}, \code{pc},
\code{dd} and \code{cc}. If the unit is omitted,
\code{\gls{bp}} is assumed. Examples:
\begin{itemize}
\item \code{\switch{paper} a4r}
\item \code{\switch{paper} user 8.5in 12in}
\item \code{\switch{paper} user 600 1000}
\end{itemize}

\FloatTable
{tab:papersizes}
{%
\begin{tabular}{llll}    
\toprule
\multicolumn{1}{c}{\bfseries Identifier} &
\multicolumn{1}{c}{\bfseries Description} &
\multicolumn{1}{c}{\bfseries Identifier} &
\multicolumn{1}{c}{\bfseries Description}
\tabularnewline 
\midrule
\optfmt{a10}&A10 portrait &    \optfmt{a10r}&A10 landscape\tabularnewline 
\optfmt{a9}&A9 portrait &    \optfmt{a9r}&A9 landscape\tabularnewline
\optfmt{a8}&A8 portrait &    \optfmt{a8r}&A8 landscape\tabularnewline
\optfmt{a7}&A7 portrait &    \optfmt{a7r}&A7 landscape\tabularnewline
\optfmt{a6}&A6 portrait &    \optfmt{a6r}&A6 landscape\tabularnewline
\optfmt{a5}&A5 portrait &    \optfmt{a5r}&A5 landscape\tabularnewline
\optfmt{a4}&A4 portrait &    \optfmt{a4r}&A4 landscape\tabularnewline
\optfmt{a3}&A3 portrait &    \optfmt{a3r}&A3 landscape\tabularnewline
\optfmt{a2}&A2 portrait &    \optfmt{a2r}&A2 landscape\tabularnewline
\optfmt{a1}&A1 portrait &    \optfmt{a1r}&A1 landscape\tabularnewline
\optfmt{a0}&A0 portrait &    \optfmt{a0r}&A0 landscape\tabularnewline
\optfmt{b10}&B10 portrait &    \optfmt{b10r}&B10 landscape\tabularnewline
\optfmt{b9}&B9 portrait &    \optfmt{b9r}&B9 landscape\tabularnewline
\optfmt{b8}&B8 portrait &    \optfmt{b8r}&B8 landscape\tabularnewline
\optfmt{b7}&B7 portrait &    \optfmt{b7r}&B7 landscape\tabularnewline
\optfmt{b6}&B6 portrait &    \optfmt{b6r}&B6 landscape\tabularnewline
\optfmt{b5}&B5 portrait &    \optfmt{b5r}&B5 landscape\tabularnewline
\optfmt{b4}&B4 portrait &    \optfmt{b4r}&B4 landscape\tabularnewline
\optfmt{b3}&B3 portrait &    \optfmt{b3r}&B3 landscape\tabularnewline
\optfmt{b2}&B2 portrait &    \optfmt{b2r}&B2 landscape\tabularnewline
\optfmt{b1}&B1 portrait &    \optfmt{b1r}&B1 landscape\tabularnewline
\optfmt{b0}&B0 portrait &    \optfmt{b0r}&B0 landscape\tabularnewline
\optfmt{c10}&C10 portrait &    \optfmt{c10r}&C10 landscape\tabularnewline
\optfmt{c9}&C9 portrait &    \optfmt{c9r}&C9 landscape\tabularnewline
\optfmt{c8}&C8 portrait &    \optfmt{c8r}&C8 landscape\tabularnewline
\optfmt{c7}&C7 portrait &    \optfmt{c7r}&C7 landscape\tabularnewline
\optfmt{c6}&C6 portrait &    \optfmt{c6r}&C6 landscape\tabularnewline
\optfmt{c5}&C5 portrait &    \optfmt{c5r}&C5 landscape\tabularnewline
\optfmt{c4}&C4 portrait &    \optfmt{c4r}&C4 landscape\tabularnewline
\optfmt{c3}&C3 portrait &    \optfmt{c3r}&C3 landscape\tabularnewline
\optfmt{c2}&C2 portrait &    \optfmt{c2r}&C2 landscape\tabularnewline
\optfmt{c1}&C1 portrait &    \optfmt{c1r}&C1 landscape\tabularnewline
\optfmt{c0}&C0 portrait &    \optfmt{c0r}&C0 landscape\tabularnewline
\optfmt{letter}&Letter portrait &    \optfmt{letterr}&Letter landscape\tabularnewline
\optfmt{legal}&Legal portrait &    \optfmt{legalr}&Legal landscape\tabularnewline
\optfmt{executive}&Executive portrait &    \optfmt{executiver}&Executive landscape\tabularnewline
\bottomrule 
\end{tabular}
}%
[Paper Size Identifiers]
{Paper size identifiers for use with \switch{paper} command line switch.}


\switchdef{disable_print}
Disable the request for printer attributes on startup.

\switchdef{nodisable_print}
Don't disable the request for printer attributes on startup (default).

\switchdef{debug}
Enable debugging mode. This will add the \inlineglsdef{menu.debug}
menu to the main menu bar which provides the following functions:
\menu{debug.objectinfo} (displays diagnostic information about the
currently selected objects); \menu{debug.writelog} (writes
diagnostic information for all currently open images to a log file
in the \gls{config_dir}) \menu{debug.revalidate} (revalidates the
image) and \menu{debug.dumpall} (saves all current images to a
subdirectory of the \gls{config_dir}).

\switchdef{nodebug}
Don't enable debugging mode (default).

\switchdef{experimental}
Enable experimental functions for testing purposes. These functions don't
work properly and are not documented.

\switchdef{noexperimental}
Don't enable experimental functions (default).

\switchdef{help}
Display help message and exit.

\switchdef{version}
Display version details and exit.

\section{The Settings Menu}\label{sec:settingsmenu}

\menudef{menu.settings}

While \appname\ is running, you can change the current settings
using the \menu{settings} menu. Most of the settings will be
remembered next time you use \appname, but may be overridden
either by \hyperref[sec:cmdargs]{command line arguments} or by
settings specified in any \gls{JDR} or \gls{AJR} file that you load.

If you have selected \widget{initsettings.default} in the
\widget{initsettings.title} tab of the \dialog{config} dialog,
then the \emph{\gls{canvas}} settings will be set to the default
values on startup (unless overridden, as above). Some (but not all)
of the user interface settings may still be remembered from the
previous session.

\subsection{Styles}\label{sec:setcurrentstyles}

\menudef{menu.settings.styles}

The \menu{settings.styles} menu item will open a dialog window
which can be used to set the current \gls{path} and
\gls{textarea} attributes. New paths and text areas will use these
attributes when they are created. The attributes for existing paths
and text areas are changed using the \menu{edit} menu.  These
settings are discussed in more detail in \sectionref{sec:styles}.

\subsection{Show Rulers}\label{sec:showrulers}

\menudef{menu.settings.rulers}

The \menu{settings.rulers} menu item can be used to toggle between showing
and hiding the \glspl{ruler} for the current \gls{canvas}. This
setting will be applied to new \glspl{canvas} that are subsequently
opened, but the setting may be overridden when a new image is
loaded.

\seealsorefs{sec:rulers}

\subsection{Grid}\label{sec:gridmenu}

\menudef{menu.settings.grid}

The \menu{settings.grid} submenu allows you to change
the \gls{grid} settings:

\menudef{menu.settings.grid.show}

The \menu{settings.grid.show} menu item toggles between displaying
the \gls{grid} on the \gls{canvas} and hiding it. If there is
enough memory available, the grid will be stored as a bitmap in
order to improve redraw speed.

\plabel[Locking the Grid]{mi:gridlock}
\menudef{menu.settings.grid.lock}

The \menu{settings.grid.lock} menu item toggles between locking and
unlocking the grid. If the grid is locked, mouse \glspl{click} will
be translated to the nearest tick mark.  This means that if you use
a mouse \gls{click} to set the location of a \gls{controlpt} when
constructing a \gls{path}, the point will be placed at the nearest
tick mark. This also means that when you move a point while in edit
mode (\sectionref{sec:editpath}), the point will be moved in
intervals of the gap between tick marks. Note that locking the grid
does not affect the keyboard or menu driven functions, such as
\menutrail{menu.navigate.goto} \accelerator{menu.navigate.goto}
or emulate a \gls{primaryclick}
\accelerator{action.constructclick}.


When the grid is locked, the \gls{statusbar} will show the image
\includeimg[alt={Grid lock on}]{key} otherwise it will show
the image \includeimg[alt={Grid lock off}]{keycross}.
You can \gls{doubleclick} on this image to toggle the state.

\begin{warning}
If you lock the grid, you will be unable to use the
mouse to select narrow \glspl{path} that lie between tick marks as
mouse \glspl{click} will be translated to the nearest tick mark, unless you
use the drag rectangle (which may select other objects as well).
\end{warning}

Similarly, if the \widget{editpathui.ignorelock}
option is off, you won't be able to select \glspl{controlpt} in
\hyperref[sec:editpath]{edit mode} with the mouse unless a
tick mark lies inside the \gls{controlpt}['s] bounding box.
You will however be able to select them using the
\menutrail{menu.editpath.next_control} 
or \menutrail{menu.editpath.prev_control} functions.


\subsection{Zoom}\label{sec:zoommenu}

\menudef{menu.settings.zoom}

The \menu{settings.zoom} sub-menu allows you to change
the magnification. You can choose one of the predefined
settings or you can specify an arbitrary setting.

\menudef{menu.settings.zoom.user}

The \menu{settings.zoom.user} menu item will open 
the \inlineglsdef{zoom.title} dialog box in
which to specify an arbitrary magnification.  The magnification
value may be entered as either a percentage or a decimal value. For
example, either 150\% or 1.5 to zoom by a factor of 1.5.  You can
also change the magnification using the zoom function in the 
\gls{statusbar}. \Gls{click} on the decrease button \includeimg{zoomdown} to
reduce the magnification or on the increase button
\includeimg{zoomup} to increase the magnification, according to the
list of preset values.  Alternatively, you can \gls{doubleclick} to
open the \dialog{zoom} dialog box or \gls{menuclick} on the percentage value
to open a~popup menu.


\subsection{Paper}\label{sec:papermenu}

\menudef{menu.settings.paper}

The \menu{settings.paper} sub-menu allows you to change
the paper size and orientation.

\menudef{menu.settings.paper.margins}

The \menu{settings.paper.margins} item toggles between showing
and hiding the printer margins, but note that this facility is not
available if you use the \switch{disable_print} command line
argument.

The predefined paper sizes A0 to A5, letter, legal and executive
can be selected from the \menu{settings.paper} menu.

\menudef{menu.settings.paper.other}

The \menu{settings.paper.other} item allows a custom paper size to
be specified.  Select the  \widget{paper.predefined} radio button to
enable a list of additional known paper sizes or select the
\widget{paper.user} radio button to enter a custom size.


\subsection{Configure Image Settings}\label{sec:configuredialog}

\menudef{menu.settings.config}

The \menu{settings.config} menu item opens the \dialog{config}
dialog box, which can be used to change image settings.
(\sectionref{sec:texconfig} covers \TeX\slash\LaTeX\ related settings and
\sectionref{sec:configureuidialog} covers settings related to the user
interface.)


\subsubsection{Control Points}\label{sec:controlsettings}

\widgetdef{controls.title}

\FloatFig
  {fig:configdialog-controlsettings}
  {\includeimg{configureDialog-controls}}
  {Configuration Dialog Box (Control Point Settings)}

The \widget{controls.title} tab
(\figureref{fig:configdialog-controlsettings})
allows you to:
\begin{itemize}
 \item set the size of the \glspl{controlpt};
 \item specify whether the \gls{controlpt} size should be affected by
the zoom setting;
 \item set the \gls{storageunit}.
\end{itemize}

It's best to set the \gls{storageunit} before you start creating an
image. If the selected \gls{canvas} isn't empty, all \glspl{object} will
have their co-ordinates recomputed in terms of the new unit, which
may take a while if there are many \glspl{object} or \glspl{path}
with many segments.  You can also open a dialog window with just the
storage unit panel in it by \glslink{doubleclick}{double-clicking}
the mouse on the storage unit area of the \gls{statusbar}.


\subsubsection{Startup Directory}\label{sec:startdir}

\widgetdef{startdir.title}

\FloatFig
  {fig:configdialog-startdir}
  {\includeimg{configureDialog-startdir}}
  {Configuration Dialog Box (Startup Directory Settings)}

The \widget{startdir.title} tab
(\figureref{fig:configdialog-startdir})
allows you to choose which directory \appname\ should use as the
current working directory when it starts up. You have a choice of:
\begin{itemize}
\item the current working directory that you were in when you started
up \appname;
\item the directory you were using when you last used \appname;
\item a specific directory. In this case, type in the path in the
\widget{startdir.named} box or use the
\widget{startdir.browse} button to select the required
directory.
\end{itemize}


\subsubsection{JDR/AJR Settings}\label{sec:jdrsettings}

\widgetdef{jdr.title}

\FloatFig
  {fig:configdialog-jdrsettings}
  {\includeimg{configureDialog-jdrsettings}}
  {Configuration Dialog Box (JDR/AJR Settings)}

You can use the \widget{jdr.title} tab
(\figureref{fig:configdialog-jdrsettings})
to specify whether or not you want the current
\gls{canvas} settings stored in the \gls{JDR} or \gls{AJR} file when
you save your image. You can also choose whether or not you want to
apply any canvas settings information stored in any \gls{JDR} or
\gls{AJR} file that you load. The canvas settings consist of:
grid show\slash hide, grid locked\slash not locked, rulers
displayed\slash not displayed, the tool in use, the LaTeX normal
size, the paper size, the grid style, the size of the
\glspl{controlpt} and whether they should be affected by the
magnification setting.


\subsubsection{Startup Settings}\label{sec:initsettings}

\widgetdef{initsettings.title}

\FloatFig
  {fig:configdialog-initsettings}
  {\includeimg{configureDialog-initsettings}}
  {Configuration Dialog Box (Startup Settings)}

You can use the \widget{initsettings.title} tab
(\figureref{fig:configdialog-initsettings})
to choose whether you want \appname\ to start with its
default settings, or whether to restore the settings from the last
time you used \appname, or whether to use the settings that are
currently in use.

If you choose the default settings option, the \emph{\gls{canvas}}
settings will be set to the default on startup.  Some (but not all)
of the user interface settings may still be remembered from the
previous session, including the language used by the user interface
and the manual, the paths to the required applications used by the
export functions (\sectionref{sec:exportimage}) and the button styles.

Most of the settings are saved in the file \file{flowframtk.conf} in the
\gls{config_dir}.  Mappings,
accelerators, language settings and the recent file list aren't
governed by the startup setting and are stored in separate files in
the configuration directory. When you upgrade to a new version of
\appname, the accelerators are reset to the default and then the
existing accelerators file is loaded to ensure any new accelerators
are added. Don't modify these files whilst \appname\ is running.
You may modify them after you have quit \appname\ using a text
editor, but make sure you save your changes before restarting
\appname.


\subsubsection{Bitmaps}\label{sec:bitmapconfig}

\widgetdef{bitmapconfig.title}

\FloatFig
  {fig:configdialog-bitmap}
  {\includeimg{configureDialog-bitmap}}
  {Configuration Dialog Box (Bitmap Settings)}

You can use the \widget{bitmapconfig.title} tab
(\figureref{fig:configdialog-bitmap})
to choose whether included \glspl{bitmap} should be
saved using their full path name or a path name relative to the
file being saved. Relative names allow for greater portability, but
if you move the saved file to a different location, you will need to
remember to move the bitmap files relative to the new location or
they won't be found.

You can also use this tab to specify
your preferred default image command, which may be either
\gls{pgfimage} or \gls{includegraphics}.


\subsubsection{Application Paths}\label{sec:processes}

\widgetdef{processes.title}

\FloatFig
  {fig:configdialog-apppaths}
  {\includeimg{configureDialog-apppaths}}
  {Configuration Dialog Box (Application Paths)}

If you export your image to PDF, EPS or SVG (see \sectionref{sec:exportdoc})
\appname\ will first save the image as an encapsulated \LaTeX\
document and will then run external applications to create the
desired file format. In order to do this, \appname\ needs to know
the correct paths to these applications. It will try to find them
from your system's \gls{PATH} environment variable, but if it
can't find them you can use the \widget{processes.title} tab
(\figureref{fig:configdialog-apppaths}) to set their locations.  The
\file{libgs} library is needed by \app{dvisvgm}, so you only
need it if you intend to export to \gls{svg}.

To reduce the chance of zombie processes, each process is run with a
timer that will kill the process if it exceeds the value specified
in the \widget{processes.timeout} box.


\subsection{\TeX\ Settings Dialog}\label{sec:texconfig}

\menudef{menu.settings.configtex}

The \menu{settings.configtex} menu item will open up 
the \inlineglsdef{texconfig.title} dialog box
in which you can adjust the \TeX\slash\LaTeX\ settings.
(\sectionref{sec:configuredialog} covers image settings
and \sectionref{sec:configureuidialog} covers user interface settings.)


\subsubsection{Setting the Document Class and Normal Font Size}
\label{sec:normalsize}

\widgetdef{clssettings.title}

Most of \appname's \TeX\slash\LaTeX\ related functions (including the
\hyperref[sec:exportimage]{export function}) require a value
corresponding to \gls{normalsize} (the \LaTeX\ command that sets the
\gls{normal-font-size}). A \gls{textarea} needs to know the normal
font size to determine the appropriate font size declaration (see
\sectionref{sec:fontsize}). In addition, both the
\gls{menu.tex.parshape} and \gls{menu.tex.shapepar} functions use
the value of \gls{baselineskip} for the normal font size in order to
determine the location of the scan lines used to compute the
required parameters. This also means that any static or dynamic
frames (\sectionref{sec:flowframe}) that use a non-standard paragraph
shape also require this information.

\FloatFig
 {fig:normalsize}
 {\includeimg{normalsizeandclass}}
 {Setting the Normal Font Size and (optionally) the Class}

The \gls{normal-font-size} can be set using the
\widget{clssettings.title} tab (\figureref{fig:normalsize}).  Select the
required value from the \gls{dropdown} and select
\dgls{okay} to set it. Note that you must remember
to use this value in your document. For example, if you set the
normal size as 20, your document will need to use one of the
\sty{extsizes} class files, e.g.\ \cls{extarticle}, and specify
20\gls{pt} as one of the optional arguments:
\begin{codebox}
\cmd{documentclass}[20pt]\marg{extarticle}
\end{codebox}

The largest normal size listed is 25pt (the value is actually
24.88pt, but \appname\ lists it as 25pt) which is for use with the
\cls{a0poster} class file. Remember that for very large or very
small fonts, you will need to use scalable fonts in your document to
prevent font size substitutions.  Available values, along with the
corresponding value of \gls{baselineskip} and the file in which they
are defined, are listed in \tableref{tab:normalsize}.

\FloatTable
{tab:normalsize}
{%
\begin{tabular}{@{}ccl@{}}
\bfseries Normal size value & \bfseries \gls{baselineskip}
value & \bfseries Relevant File\\
8 & 9.5 & \filefmt{tex/latex/extsizes/size8.clo}\\
9 & 11 & \filefmt{tex/latex/extsizes/size9.clo}\\
10 & 12 & \filefmt{tex/latex/base/size10.clo}\\
11 & 13.6 & \filefmt{tex/latex/base/size11.clo}\\
12 & 14.5 & \filefmt{tex/latex/base/size12.clo}\\
14 & 17 & \filefmt{tex/latex/extsizes/size14.clo}\\
17 & 22 & \filefmt{tex/latex/extsizes/size17.clo}\\
20 & 25 & \filefmt{tex/latex/extsizes/size20.clo}\\
25 & 30 & \filefmt{tex/latex/a0poster/a0poster.sty}
\end{tabular}
}
[Available Values for the Normal Font Size]
{Available values for the normal font size, the corresponding value
and the file in which they are defined (relative to the TEXMF
tree).}

If the \widget{clssettings.update} \gls*{checkbox} is selected,
changing the normal size setting in this dialog will update the
\LaTeX\ font size settings for all the \glspl{textarea} in the
current image.

If you want to export your image to a complete \LaTeX\ document (see
\sectionref{sec:exportdoc}) the document class will default to:
\begin{itemize}
\item \cls{article}, if the normal size is
set to 10, 11 or 12;
\item \cls{a0poster}, if the normal size is set to
25;
\item \cls{extarticle}, otherwise.
\end{itemize}
If you want to use a different document class, select the
\widget{clssettings.custom_cls} radio button, which will enable the
field where you can type the require class name (without the
\filefmt{.cls} extension). You need to ensure the class supports your
specified normal font size (as a standard option, not a key=value
option).

The document class is also used as the base class with the export to
document class function (see \sectionref{sec:exportsty}) and is used
for all export functions that use the export to encapsulated \LaTeX\
document function as an intermediate step (\sectionref{sec:exportdoc}).

The \widget{clssettings.relative_fontsize} \gls*{checkbox} governs
the suggested \LaTeX\ font size command when you change the
\hyperref[sec:fontsize]{font size setting} for \glspl{textarea}. If
this \gls*{checkbox} is selected, \appname\ will attempt to select a
font size declaration, such as \gls{large}, according to the current
normalsize setting. Otherwise, \gls{setfontsize} will be used. If
the font size is significantly larger than the largest available
declaration, \gls{setfontsize} will be used regardless of this
setting.

The \widget{clssettings.pdfinfo} \gls*{checkbox} governs whether or
not to add \gls{pdfinfo} to exported \LaTeX\ documents. If the image
has a description (\sectionref{sec:imagedescription}), this will be
added to the \gls{pdfinfo/Title} attribute. The only other attribute
that is set is the \gls{pdfinfo/CreationDate} attribute. This setting is
not used for the export to PostScript or \gls{svg} functions as they
use \app{latex} rather than \app{pdflatex}.

When an image is exported to an encapsulated \LaTeX\ document
or complete \LaTeX\ document, by default the image bounding box
is calculated as the minimal sized rectangle that encompasses all
\glspl{object} on the \gls{canvas}. If the image contains an
\glspl*{textarea}, this may result in text being clipped to the left
or right of the image due to the font differences. In this case, or
if you require a different bounding box for some other reason, then
switch on the \widget{clssettings.use_typeblock_as_bbox}
\gls*{checkbox} and if the image has a typeblock set
(see \sectionref{sec:typeblock}) the typeblock will be used as the image
bounding box. If the image doesn't have a typeblock set, then the
default bounding box will be used. See also \figureref{fig:equation}
in \sectionref{sec:exportdoc}.


\subsubsection{Flowframe Settings}\label{sec:texconfigflf}

\widgetdef{flfsettings.title}

\FloatFig
 {fig:flfsettings}
 {\includeimg{flfsettings}}
 {Flowframe Settings Tab}

The \widget{flfsettings.title} tab
(\figureref{fig:flfsettings}) allows you to adjust the
\sty{flowfram} related settings.

The \sty{flowfram} package now allows you to use absolute pages
numbers in the page list rather than using the value of the
\ctr{page} counter. For example, if your document pages are numbered
a, b, i, ii, iii, 1, 2, 3, then with the absolute setting page
number 3 refers to the page \manmsg{labelled} i whereas with the
relative setting page number 3 refers to both the page
\manmsg{labelled} iii and the page \manmsg{labelled} 3. (See the
\sty{flowfram} documentation for further details.) If you want to
use the absolute setting, select the
\widget{flfsettings.pages_opt.absolute} button otherwise select the
\widget{flfsettings.pages_opt.relative} button.

The \sty{shapepar} package now has a command called
\gls{Shapepar} that behaves slightly differently to
\gls{shapepar}. Since \gls{Shapepar} works better than
\gls{shapepar} when used with the \sty{flowfram} package,
\appname\ defaults to using \gls{Shapepar} for the
\gls{menu.tex.shapepar} function or when a
\hyperref[sec:flowframe]{static or dynamic frame} has the
shape set to \widget{flowframe.shape_shapepar}. However, if
you prefer the original \gls{shapepar} command, selected the
appropriate \widget{flfsettings.shapeparcs} radio button.
If you want to use \gls{Shapepar}, you need to ensure you have
up-to-date versions of the \sty{flowfram} and \sty{shapepar}
packages. This setting applies both to frames with the
\widget{flowframe.shape_shapepar} shape setting and to the
\gls{menu.tex.shapepar} function.

\subsubsection{Text Settings}\label{sec:texconfigtext}

\widgetdef{textconfig.title}

\FloatFig
  {fig:configdialog-texsettings}
  {\includeimg{configureDialog-texsettings}}
  {LaTeX-Related Text Settings}

The \widget{textconfig.title} tab
(\figureref{fig:configdialog-texsettings})
allows you to adjust the text-related settings.

\widgetdef{textconfig.anchor}

If the \widget{textconfig.anchor} \gls{checkbox} is selected,
whenever you \hyperref[sec:alignobjects]{justify} a \gls{group}, any
\glspl{textarea} in that group will have their anchors automatically
adjusted.

\widgetdef{textconfig.textualshading}

\appname\ can't implement paint shadings for text when
\hyperref[sec:exportpgf]{exporting} to \sty{pgf}. (This includes the
export functions that use \app{latex} or \app{pdflatex}, such as
the export to PDF function.) You can choose how \appname\ should export
shaded text using the \widget{textconfig.textualshading} dropdown
box. Available options:

\begin{deflist}
\itemtitle
 {\inlineglsdef{textconfig.textualshading.average}}

\begin{itemdesc}
The text will be given the \manmsg{colour} obtained by averaging the
shading's start and end \manmsg{colour}.
\end{itemdesc}

\itemtitle
 {\inlineglsdef{textconfig.textualshading.start}}

\begin{itemdesc}
Just the shading's start \manmsg{colour} will be used.
\end{itemdesc}

\itemtitle
 {\inlineglsdef{textconfig.textualshading.end}}

\begin{itemdesc}
Just the shading's end \manmsg{colour} will be used.
\end{itemdesc}

\itemtitle
 {\inlineglsdef{textconfig.textualshading.path}}

\begin{itemdesc}
The text will be exported as a path rather than text. This means
that the \LaTeX\ alternative text attribute will be ignored. This is
equivalent to applying the 
\hyperref[sec:converttopath]{convert to path}, 
\hyperref[sec:grouping]{ungroup} and 
\hyperref[sec:mergepaths]{merge path}
functions (without actually changing your image).
\end{itemdesc}

\end{deflist}

\widgetdef{textconfig.textpathoutline}

\appname\ can't implement the text
\hyperref[sec:textoutline]{outline} option for
\glspl{textpath} when exporting to \sty{pgf}. (Again, this
includes the export functions that use \app{latex} or \app{pdflatex}.)
You can choose how \appname\ should export \gls{textpath}
outlines using the \widget{textconfig.textpathoutline}
dropdown box. Available options:

\begin{deflist}
\itemtitle
 {\inlineglsdef{textconfig.textpathoutline.path}}

\begin{itemdesc}
The \gls{textpath} will be exported as a path rather than a
\gls{textpath}. This means that the \LaTeX\
alternative text attribute will be ignored. This is equivalent to
applying the
\hyperref[sec:converttopath]{convert to path}, 
\hyperref[sec:grouping]{ungroup} and 
\hyperref[sec:mergepaths]{merge path}
functions, without actually changing your image.
(This option will always override the shading options described
above, if the \gls{textpath} has a shading.)
\end{itemdesc}

\itemtitle
 {\inlineglsdef{textconfig.textpathoutline.ignore}}

\begin{itemdesc}
The outline attribute will be ignored.
\end{itemdesc}

\end{deflist}

\iconstartpar{textarea,math}%
\plabel[TeX Mappings]{mi:texmappings}%
\appname\ has two tools for creating \glspl{textarea}: the
regular text-mode tool (\menu{tools.textarea}) and the
\manmsg{maths}-mode tool (\menu{tools.math}). Each \gls{textarea} has an
associated \LaTeX\ alternative text which, if set, is used
during the \sty{pgf} export operations in place of the
text displayed on the \gls{canvas}. (This includes the export
functions that use \app{latex} or \app{pdflatex}, such as
the export to PDF function.) The \manmsg{maths}-mode tool automatically
inserts \glsname{mshift} at the start and end of the
alternative text. In addition, Unicode symbols present in
the text when a new \gls*{textarea} is constructed can be mapped to
a \LaTeX\ command.

The mappings applied depend on which tool has been selected. With
the regular text-mode tool, all the ten \TeX\ special characters are
mapped to commands. In addition, there are some other characters
that are also mapped by default. These are listed in the table shown
in the \widget{textconfig.textmode} tab (see
\figureref{fig:configdialog-texsettings}). If you don't want any
text mappings applied, deselect the
\widget{textconfig.escape} \gls{checkbox}.

With the \manmsg{maths}-mode tool, the \gls{hash} and \gls{percent} characters are the
only two of the ten \TeX\ special characters that are mapped by
default. However there are other mappings of \manmsg{maths}-related Unicode
characters and these are listed in the table shown in the
\widget{textconfig.mathmode} tab (see
\figureref{fig:configdialog-mathsettings}). If you don't want
\manmsg{maths} mappings applied, deselect the
\widget{textconfig.escape.mathchar} \gls*{checkbox}.

\FloatFig
  {fig:configdialog-mathsettings}
  {\includeimg{configureDialog-mathsettings}}
  {LaTeX-Related Text Settings\dash \Manmsg{maths}-Mode Mappings}

The mapping tables can be sorted by \glslink{click}{clicking} on
their column headers. You can add, delete or modify any of these
text- or \manmsg{maths}-mode mappings. Any mapping that ends with a control
word (a backslash followed by one or more letters) should
usually be followed by a space or \verb|{}| to prevent it from
running into any subsequent letter when the mapping is applied. For
text-mode mappings, \verb|{}| is better in case the command is
followed by an intended space, although this may depend on the
command definition. For \manmsg{maths}-mode mappings it's better
to follow the control word with a space.

One or more rows in a mapping table can be selected with the mouse.
You can use \keys{\keyref{shift}}+\gls{click} or 
\keys{\keyref{ctrl}}+\gls{click} to add to the
current selection.

\widgetdef{textconfig.remove.textmap}

To delete a mapping or mappings, select the appropriate row or rows of the
mapping table and click on the \widget{textconfig.remove.textmap} button
to the side of the table.  To restore all the original mappings,
quit \appname\ and delete or rename the files
\file{mathmappings.prop} and \file{textmappings.prop} in the
\gls{config_dir}.

To edit an existing mapping, \gls{doubleclick} on the second and
third columns of the mapping table. The first two columns can't be
edited.

\widgetdef{textconfig.add.textmap}
\plabel[New \TeX\ Mappings]{mi:newtexmappings}%
To add a new mapping, \gls{click} on the green plus button to the
side of the relevant table.  This will open the add new mapping
dialog. Enter the character you want mapped in the
\widget{textconfig.symbol} box or type the hexadecimal value in the
\widget{textconfig.codepoint} box and then enter the replacement
command in the \widget{textconfig.command} box.  If the command is
defined in a package, enter the package name (without the \ext{sty}
extension) in the \widget{textconfig.package} box. If the mapping
requires multiple commands from different packages, you can specify
a comma-separated list of packages in the
\widget{textconfig.package} box. If the replacement command is
available in the \LaTeX\ kernel, you can leave this box blank.
(These packages will be automatically added to the
\hyperref[sec:preamble]{image's early-preamble} code, whenever the
mapping is applied.)

The package name may be preceded by optional arguments in square
brackets, for example \code{[weather]ifsym} (note that the package name
isn't enclosed in braces). Set the package name to \qt{none} or
leave it empty if you don't want it automatically added to the early-preamble
code when the mappings are applied.

For example, in \figureref{fig:addTeXMapping} the new mapping dialog
is being used to define a new text mapping from the Unicode dagger
\textdagger\ symbol (U+2020) to the \csfmt{textdagger} command.
Since this command is defined in the \LaTeX\ kernel, the package
field can be left empty. The Unicode symbol can be specified either
by typing the hexadecimal code into the
\widget{textconfig.codepoint} field or by typing the actual
symbol into the \widget{textconfig.symbol} field. If there
is already a mapping for this Unicode symbol, the old mapping will
be overwritten.

\FloatFig
  {fig:addTeXMapping}
  {\includeimg{addTeXMapping}}
  {Adding a New Text Mapping} 

\widgetdef{textconfig.textmappings.import}
You can also import mappings from a tab-separated file (\ext{tsv})
where the first column is the hexadecimal code, the second column is
the command (or commands) and the third column is the package name
or comma-separated list of packages. Any additional columns are
ignored, as are blank lines or lines starting with \gls{hash}. The file
shouldn't contain any delimiters nor may any of
the cells contain a newline or tab character. For example,
the file may look like:
\begin{verbatim}
00260E  \Telephone      [misc]ifsym
0026A1  \Lightning      [weather]ifsym
\end{verbatim}

You can find extra mappings using the Symbol Lookup page at
\url{http://www.dickimaw-books.com/latex/symbol-lookup.php} which
has a web form you can use to look up mappings in the database.  If
the mapping ends with a control word the import function will
automatically append a space for \manmsg{maths}-mode or
\verb|{}| for text-mode, unless the Unicode character type is one
of: combining spacing mark, connector punctuation, modifier symbol
or modifier letter, in which case just a space is appended.
(This adjustment isn't done for the edit mapping or
add a single-mapping functions described above. You need to do this
yourself, as I did in \figureref{fig:addTeXMapping}.) If this
adjustment isn't appropriate, you can edit the mapping to remove it.

For example, in \figureref{fig:symbolLookup}, I've selected the
\qt{Latin-1 Supplement} block with the mode set to \qt{text}. If I
then click on the \qt{Search} button at the bottom of the form, this
will list all the mappings listed in the database that match. To
import these values into \appname, you first need to download
them in the correct format. Set the \qt{Results Format}
\gls{dropdown} to TSV (\emph{not CSV}) and click on the
\qt{Search} button. Depending on your browser, this may
automatically save the file \filefmt{symbol-lookup.tsv} in your
downloads directory\slash folder or it may try to open the file.
Be careful if it tries to open the file in a spreadsheet application
as this may change the format to one that's not compatible with
\appname.

\FloatFig
  {fig:symbolLookup}
  {\includeimg[width=0.9\textwidth]{symbol-lookup}}
  {Symbol Lookup Script}

If you try this search on the Symbol Lookup page and open the file in your
\manmsg{favourite} text editor, you may notice that some codepoints are listed
multiple times. For example:
\begin{verbatim}
0000A3  \textsterling   none    text    0
0000A3  \pounds         none    both    0
\end{verbatim}
If you simply import the file into \appname, new mappings will
override the earlier mappings, so in this case the mapping for
U+A3 will be set to \csfmt{pounds} rather than
\csfmt{textsterling} so delete any of the mappings you don't want
before you import the file.

This example also produces mappings that require the \sty{fontenc}
package. For example:
\begin{verbatim}
0000AB  \guillemotleft  fontenc text    0
\end{verbatim}
This indicates commands that are part of the \LaTeX\ kernel but don't
work with the default OT1 font encoding. In my case, I've set my
\hyperref[sec:texconfigpreamble]{default preamble} to include
\sty{fontenc} with the T1 encoding, so I don't want that package
automatically added to my early-preamble code. To fix this, I just need to
use my text-editor's search-and-replace function to replace all instances of
\qt{fontenc} with \qt{none} before I import this file. If you don't
have this package in the default preamble, you'll need to add the appropriate
option.  For example, change the line to:
\begin{verbatim}
0000AB  \guillemotleft  [T1]fontenc     text    0
\end{verbatim}
(Again, you can use your text-editor's search-and-replace function.)
Similarly, if you want to import any of the symbol maps that include
commands from the \sty{mathdesign} package, you'll need to add
the option to set the required font. For example
\begin{verbatim}
002231  \intclockwise   [utopia]mathdesign      math    1
\end{verbatim}

Once all these modifications have been made, the file can then be
imported by clicking on the import button in the appropriate mapping
pane. In this case, I have fetched mappings that are valid in
text-mode, so I need to select the \widget{textconfig.textmode} tab
and then click on the import button to the right of the mapping
table. This will open a file chooser which I can use to select the
TSV file.

\begin{warning}
Note that mappings take up resources and the more mappings you have,
the longer it will take to startup \appname, so it's best to only
add the mappings that you're likely to need. The symbol lookup form
on the Dickimaw Books website has a maximum limit of 500 for the search
results. (A smaller limit can be set if required. The default value
is 200.)
\end{warning}

\subsubsection{Default Preamble}\label{sec:texconfigpreamble}

\widgetdef{preambleconfig.title}

The \widget{preambleconfig.title} tab
(\figureref{fig:texconfig-preamble}) allows you to specify code that
should always be added to the preamble when exporting images to
complete \LaTeX\ documents or formats that use the encapsulated
\LaTeX\ document function as an intermediate step (see
\sectionref{sec:exportdoc}). This code isn't used for the export to
class (\ext{cls}) or package (\ext{sty}) functions.

\FloatFig
  {fig:texconfig-preamble}
  {\includeimg{texconfig-preamble}}
  {Default Preamble Code}

The default preamble code is stored in a file called
\file{preamble.tex} in \appname's \gls{config_dir}. If you edit this
file outside of \appname, you'll need to use the reload button to
refresh this panel. The other buttons are the same as for the \TeX\
editor described in \sectionref{sec:texeditorui}.  You can also
access these button actions through the context menu, which can be
opened using a~\gls{menuclick} on the editor pane.


\subsection{Configure User Interface}\label{sec:configureuidialog}

\menudef{menu.settings.configui}

The menu item \menu{settings.configui} will open up a dialog box
in which you can adjust the user interface settings.
(\sectionref{sec:configuredialog} covers image settings
and \sectionref{sec:texconfig} covers \TeX\slash\LaTeX\ related
settings.)


\subsubsection{Graphics Settings}\label{sec:graphics}

\widgetdef{graphics.title}

\FloatFig
  {fig:graphics}
  {\includeimg{configureUI-graphics}}
  {Configuration UI Dialog Box (Graphics Settings)}

The \widget{graphics.title} tab (\figureref{fig:graphics})
allows you to:
\begin{itemize}
\item choose between using or not using \gls{anti-aliasing}
to display the graphics;

\item choose between speed or quality in the \gls{rendering};

\item set the \manmsg{colour} for the different types of
\glspl*{controlpt};

\item choose whether a mouse \gls{click} on the \gls{canvas} (outside of
any of the \glspl{controlpt}) exits
\hyperref[sec:editpath]{edit path mode}.

\item choose whether or not to ignore the
\hyperref[mi:gridlock]{grid lock} when using the
mouse to select a \gls{controlpt} in edit path mode.
\end{itemize}


\iconstartpar{hotspots.png,nohotspots.png}%
\plabel[Hotspots]{mi:hotspots}%
You can also use the \widget{graphics.title} tab to choose between
enabling (left icon) and disabling (right icon) hotspots along the
\glspl{bbox}. If hotspots are enabled, you can scale, rotate or
shear \glspl{object} by dragging the appropriate hotspot. (Note that
transforming \glspl{compositeshape} applies the transformation to
the \emph{underlying} shape not to the shape as a whole.)

You may want to disable this option when you want to move small
objects, or you may end up transforming them instead of moving them.
When this option is enabled, the cursor will change
shape when you move it over the edge of the \gls{bbox}.
(The actual cursor appearance depends on the look and
feel of the platform you are using. On some systems the South and
North arrows may look the same, and similarly for the East and West
arrows.)
\figureref{fig:hotspotsa} shows how the \gls{bbox} is displayed
when hotspots are enabled and \figureref{fig:hotspotsb} shows
how the \gls{bbox} is displayed when the hotspots have been
disabled. Each hotspot is represented by a small square. Available
functions are listed in \tableref{tab:hotspotfunctions}.

\FloatTable
{tab:hotspotfunctions}
{%
\begin{tabular}{lll}
\bfseries Hotspot & \bfseries Function &
\bfseries Cursor Appearance\\
Bottom left & rotate & hand\\
Bottom \manmsg{centre} & scale vertically & South arrow\\
Bottom right & scale both directions & South-East arrow\\
Middle right & scale horizontally & East arrow\\
Top right & shear vertically & North arrow\\
Top left & shear horizontally & West arrow
\end{tabular}
}
{Hotspot Functions}
 
Note that even if you have more than one \gls{object} selected, only the
object whose hotspot you are dragging will be transformed.
As may be predicted, using hotspots is not as precise as using the
transformation dialog boxes described in
\sectionref{sec:selectobjects}.

\FloatSubFigs{fig:hotspots}
{
 {fig:hotspotsa}{\includeimg{exhotspots}}{Enabled},
 {fig:hotspotsb}{\includeimg{exnohotspots}}{Disabled}
}
{Hotspots}

\seealsorefs{sec:rotateobjects,sec:scaleobjects,sec:shearobjects}

\subsubsection{Annotations Settings}\label{sec:annotations}

\widgetdef{annotations.title}

\FloatFig
  {fig:annotations}
  {\includeimg{configureUI-annotations}}
  {Configuration UI Dialog Box (Annotations Settings)}

The \widget{annotations.title} tab (\figureref{fig:annotations})
allows you to set the font used for annotating frames or draft
\glspl{bitmap} and set the font used on the splash screen during startup.


\subsubsection{Language Settings}\label{sec:languages}

\widgetdef{lang.title}

\FloatFig
  {fig:languages}
  {\includeimg{configureUI-languages}}
  {Configuration UI Dialog Box (Language Settings)}

You can use the \widget{lang.title} tab
(\figureref{fig:graphics})
to set which language to use for the application
resources (menus, messages etc) and which language to use for
the manual. These settings will not be applied until you quit and
restart \appname.

You can also use the \widget{lang.title} tab to specify the
Unicode blocks to display in the
\hyperref[mi:insertsymbol]{symbol selector}. By default, only
a limited subsection of Unicode characters are available because it
would significantly slow \appname's startup process to provide
all possible characters. To add a new block, \gls{click} on the
green plus button next to the table. To remove an unwanted block,
select the appropriate row in the table and \gls{click} on the red minus
button. The start and end values don't need to match a complete
Unicode block and may span multiple blocks. For example, suppose you
regularly want to enter musical symbols into your image, then you
can add a block starting from 1D100 and ending at 1D1DD. You need to
quit and restart \appname\ for the changes to take effect. If you
want to restore the defaults, quit \appname, open the file
\file{flowframtk.conf} in the \gls{config_dir} and remove
the line starting with \qt{unicode=}.

\seealsorefs{sec:multilingualsupport}

\subsubsection{Accelerator Settings}\label{sec:accelerators}

\widgetdef{accelerators.title}

\FloatFig
  {fig:accelerators}
  {\includeimg{configureUI-accelerators}}
  {Configuration UI Dialog Box (Accelerators)}

You can use the \widget{accelerators.title} tab
(\figureref{fig:accelerators}) to change the default accelerators
(keyboard shortcuts). It's possible to use the same keystroke for
different actions provided the actions are never both enabled at the
same time. (For example, \accelerator{menu.editpath.next_control}
selects the next control in path edit mode or adjust the selection
in select mode.)

\begin{information}
Java's accessibility API uses \accelerator{action.menubarfocus} to switch
the focus to the menu bar, so avoid using this key for an
accelerator.
\end{information}

Suppose you want to change the accelerator for the \menu{edit.undo}
function from the default \accelerator{menu.edit.undo} to, say,
\keys{\keyref{ctrl}+\keyref{shift}+U}. Find the appropriate row in
the accelerator table and \gls{doubleclick} on it to open the
\widget{accelerator.set} dialog box
(\figureref{fig:setaccelerator}).

\FloatFig
  {fig:setaccelerator}
  {\includeimg{setaccelerator}}
  {Changing a keyboard shortcut.}

There are two ways to change the
keystroke. If the \widget{accelerator.set.useselector}
button is selected, you can select or deselect the required
modifiers (such as \widget{accelerator.set.shift}) and
use the drop-down box to select the keystroke. So to change the
keystroke to \keys{\keyref{ctrl}+\keyref{shift}+\actualkey{U}}, select the
\widget{accelerator.set.shift} and
\widget{accelerator.set.ctrl} \glspl{checkbox} and set the drop-down
box to \widgetfmt{pressed U}.

Alternatively, if the \widget{accelerator.set.usekeystroke} button
is selected you can type the required keystroke in the
\widget{accelerator.set.usekeystroke.label} field. Care must be
taken with this option. You need to make sure you release the main
key before releasing the modifiers. For example, press down the
\desckeyref{ctrl}, \desckeyref{shift} and \keys{\actualkey{U}} keys
but release the \keys{\actualkey{U}} key before releasing the
\keys{\keyref{ctrl}} and \keys{\keyref{shift}} keys. 

Note that the \desckeyref{tab} key retains its usual
function of moving the focus to the next component in the window,
and so can't be typed in the
\widget{accelerator.set.usekeystroke.label} field. (Neither
can certain other keys that are always intercepted by the operating
system.) The \desckeyref{return} key, on the other hand, will be picked up
by the \widget{accelerator.set.usekeystroke.label} field
if it has the focus, so you need to ensure you move the focus to a
different component if you want to use \keys{\keyref{return}} to activate the
\btn{okay} button.

The accelerator settings are written to a file called
\inlineglsdef{file.accelerators.prop} in the \gls{config_dir} when
\appname\ quits normally. You may edit this file using your
preferred text editor to change the settings as long as \appname\
isn't currently running. For example, if you want to change all the
keystrokes that require the control key to be pressed to requiring
the meta key pressed instead, you may find it easier to do a global
search and replace in \file{accelerators.prop} of \code{ctrl}
with \code{meta}. If you do edit this file, make sure you only
edit the values to the right of the \code{=} sign. To restore the
default accelerators, delete or rename this file (when \appname\
isn't running).

\subsubsection{Toolbar, Ruler and Status Bar Settings}\label{sec:rulers}

\widgetdef{borders.title}

\FloatFig
  {fig:rulers}
  {\includeimg{configureUI-rulers}}
  {Configuration UI Dialog Box (Toolbar, Ruler and Status Bar Settings)}

You can use the \widget{borders.title} tab (\figureref{fig:rulers})
to customise the \glspl{ruler}, \glspl{toolbar} and \gls{statusbar}.
You can show or hide the \glspl{toolbar} using the
\widget{borders.showtools} checkbox. If this check box is selected,
you can also specify the location of the vertical toolbar.

\iconstartpar{toolbarleft,toolbarright}%
The vertical toolbar is located on the left of \appname's main
window by default, but can be switched to the right by selecting the
\widget{borders.vtoolbar} \widget{borders.vtoolbar.right} radio
button. You will need to quit and restart for the change to take
effect.

The width (in pixels) of the vertical ruler can be specified in the
\widget{borders.rulerwidth} field, and the height (in pixels) of
the horizontal ruler can be specified in the
\widget{borders.rulerheight} field. For example, if you find that
the $y$ co-ordinates don't fit on the vertical ruler, you can make the
ruler wider, say, to 30 pixels. There's a sample panel on the right
that shows the dimensions (but doesn't show the ruler annotations).

The way the co-ordinates appear on the rulers is governed by the
\widget{borders.rulerpattern} field.  The pattern syntax is as for
\href{https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html}{\filefmt{java.text.DecimalFormat}},
described in the Java API.  You can also set the locale governing
the pattern, but this pattern is only applied to the \glspl{ruler},
not to the co-ordinate dialog boxes or \gls{statusbar}. The font
used by the rulers can also be changed.  This panel doesn't provide
a setting to show or hide the rulers as this is done for the
currently selected \gls{canvas} using the main menu item
\menu{settings.rulers}.

You can show or hide the \gls{statusbar} using the
\widget{borders.showstatus} check box. If this box is
selected, you can additionally choose to show or hide the
individual \gls{statusbar} elements.

\seealsorefs{sec:thetoolbars,sec:therulers,sec:thestatusbar}

\subsubsection{Normalization}\label{sec:normalize}

\widgetdef{normalize.title}

\FloatFig
  {fig:normalize}
  {\includeimg{configureUI-normalize}}
  {Configuration UI Dialog Box (Normalization)}

When an image is drawn on the \gls{canvas} via Java's painting
methods, the co-ordinates of all the objects are converted into
PostScript points (including any scaling applied by the zoom
settings). However, it is rare for any display device, such as a
standard monitor, to have pixels that are exactly one PostScript point square
in size. This means that a 1in (or 72\gls{bp}) line drawn on the
screen at 100\% magnification may not actually measure 1in if you
hold a ruler up against the screen. This is fairly typical for
most graphical applications but, if it bothers you, you can
adjust the horizontal and vertical normalization factors used by
\appname\ in the \widget{normalize.title} tab
(\figureref{fig:normalize}).

If you happen to already know the normalization factors
for your device, you can enter them in the
\widget{normalize.norm.x} and
\widget{normalize.norm.y} fields. If you don't know them,
\appname\ can compute them for you. To do this, you need to hold
a ruler against the \widget{normalize.nonorm_horizontal}
line, enter the measurement in the length field below the line and
\gls{click} on the \widget{normalize.x_compute_norm} button. This
will insert the normalization factor into the
\widget{normalize.norm.x} field. Next, hold the ruler
against the \widget{normalize.nonorm_vertical} line, enter
the measurement in the length field below that line and \gls{click} on the
\widget{normalize.y_compute_norm} button. This will insert
the normalization factor into the \widget{normalize.norm.y}
field. You then need to \gls{click} on the okay button to set these
normalization factors.

\subsubsection{\TeX\ Editor Settings}\label{sec:texeditorui}

\widgetdef{texeditorui.title}

\FloatFig
  {fig:texeditorui}
  {\includeimg{configureUI-texeditorui}}
  {Configuration UI Dialog Box (TeX Editor Settings)}

\appname\ has small text editor that's opened when you want to
edit the contents of a static or dynamic frame.
The font used by this editor can be changed in the
\widget{texeditorui.title} tab (\figureref{fig:texeditorui}).
You can also set the default width (in terms of approximate number
of characters per line) and the default height (in terms of lines)
for the editor when it's first created at startup. You can also
enable or disable syntax highlighting by selecting or deselecting
the button marked \widget{texeditorui.highlight}. If
selected, you can also set the \manmsg{colour} used for comments
(indicated by \TeX's \glssymbol{percent} comment character) or for commands. The
editor currently doesn't have any spell-checking support.
The \hyperref[sec:texconfigpreamble]{default preamble} panel
of the \dialog{texconfig} dialog also
uses these settings.

In \appname\ version 0.7, this editor window was also used for changing the
preamble text, but as from version~0.8, the preamble editor has been
switched to a pane attached to the \gls{canvas} that can remain open
while you're editing the image. This pane uses these settings,
except for the default width and height, which is now governed
by the size of the \gls{canvas} window and the location of the
divider. By default, the preamble pane is to the right of the
\gls{canvas}, but you can change this using the radio buttons in the
\widget{texeditorui.split} area.

\seealsorefs{sec:thepreamblepane,sec:flowframe}

\subsubsection{Look and Feel Settings}\label{sec:lookandfeel}

\widgetdef{lookandfeel.title}

\FloatFig
  {fig:lookandfeel}
  {\includeimg{configureUI-lookandfeel}}
  {Configuration UI Dialog Box (Look and Feel Settings)}

Java displays \gls{gui} elements, such as buttons and menus,
according to the selected \qt{\gls{look-and-feel}}. There are a number of
different \glspl{look-and-feel} that may, or may not, be available on your
platform. Some of the \glspl{look-and-feel} don't support certain features
such as the click-to-collapse setting on the divider bar in split
panes, including the divider between the \gls{canvas} and the preamble
pane. The \widget{lookandfeel.title} tab has a
\gls{dropdown} with the list of available \gls{look-and-feel}. For
example, \figureref{fig:lookandfeel} has the \qt{Metal} look and
feel selected. You can change this to a different \gls{look-and-feel}, but
you must restart \appname\ for the change to be implemented.

Some example \glspl{look-and-feel} are shown in \figureref{fig:lookandfeelex}.
Note that the main window's title bar and outer border isn't
governed by Java's \gls{look-and-feel}, but by the operating
system's window manager. For example, I've used different window
themes whilst taking snapshots of \appname\ for this manual,
which is why the \manmsg{colour} and format of the title bar for the main
window and for the dialog boxes vary.

\FloatSubFigs{fig:lookandfeelex}
{
  {fig:lookandfeelex-metal}
    {\includeimg[width=0.45\linewidth]{lookandfeel-metal}}{Metal},
  {fig:lookandfeelex-nimbus}
    {\includeimg[width=0.45\linewidth]{lookandfeel-nimbus}}{Nimbus},
  {fig:lookandfeelex-cdemotif}
    {\includeimg[width=0.45\linewidth]{lookandfeel-cdemotif}}{CDE\slash Motif},
  {fig:lookandfeelex-gtk}
    {\includeimg[width=0.45\linewidth]{lookandfeel-gtk}}{GTK+}
}
{Look and Feel Examples}

In addition to changing the look and feel, you can also change how
the buttons that have icons are displayed. By default, the buttons
with icons have a bevel bordered style, with a different icon image for
the up, down, rollover and disabled states, but if you don't like
them, you can select a different type from the
\widget{lookandfeel.button.style} area. Each type has some sample
buttons displayed on the right. They don't perform any actions, but
you can press them to try them out. The button types come in the
following \manmsgpl{flavour}:

\begin{deflist}
\itemtitle{Bordered}

\begin{itemdesc}
This is the default button type described above.
These buttons have distinctive up and down states regardless of the
\gls{look-and-feel}.
\end{itemdesc}

\itemtitle{Small Bordered}

\begin{itemdesc}
Similar to bordered but a smaller version.
\end{itemdesc}

\itemtitle{Plain}

\begin{itemdesc}
This has a single icon image for the button. The up and
down look is dealt with by the \gls{look-and-feel}. This means that if the
selected look and feel doesn't draw an up or down effect, you won't
be able to see the button state.
\end{itemdesc}

\itemtitle{Small Plain}

\begin{itemdesc}
Similar to plain but a smaller version.
\end{itemdesc}

\itemtitle{Highlights}

\begin{itemdesc}
This is like plain but there is a
second icon for the down state of radio and check buttons that is
like the up state but has a highlighted background. This means that
you can now see a difference between the up and down states for the
radio and check buttons when used with a \gls{look-and-feel} style that
doesn't draw an up or down effect.
\end{itemdesc}

\itemtitle{Small Highlights}

\begin{itemdesc}
Similar to highlights but a smaller version.
\end{itemdesc}

\itemtitle{Bordered Switches}

\begin{itemdesc}
Uses the plain type for press buttons and
the bordered type icons for radio and check buttons. Unlike the
default bordered style, in this case the bordered icons also include
the \gls{look-and-feel}['s] up and down effect (where supported).
\end{itemdesc}

\itemtitle{Small Bordered Switches}

\begin{itemdesc}
Like bordered switches but a smaller version.
\end{itemdesc}

\end{deflist}

Some of these styles also display a textual label, which may be
above, below, to the left or to the right of the icon.
Alternatively, you can just select the text only option. If you
prefer to have a different style for the dialog windows, you can
uncheck the \widget{lookandfeel.dialog.as_general} button,
which will display a set of button styles that you can apply to the
dialog windows. For example, \figureref{fig:icontext} shows the
dialog window from \figureref{fig:graphics} with the
small icons and trailing text dialog button option.

As with the look and feel setting, you must restart \appname\
before the changes can be implemented.

\FloatFig
  {fig:icontext}
  {\includeimg{configureUI-graphics-icontext}}
  {Dialog Buttons with Small Icons and Trailing Text}


\section{Configuration Directory}\label{sec:configdir}


When you quit \appname, the settings will be saved in
\appname's \inlineglsdef{config_dir}.  This directory is
determined (and created if necessary) as follows:

\begin{itemize}
  \item If the environment variable \gls{JDRSETTINGS} exists
        and is a directory, that directory is used.

  \item If \appname\ detects the existence of \gls{JpgfDraw}['s]
        configuration directory, that will be used. If the file
        \file{jpgfdraw.conf} exists in that directory but the file
        \file{flowframtk.conf} doesn't exist, \appname\ will load the
        settings from \file{jpgfdraw.conf} and then save the new settings to
        \file{flowframtk.conf}. If you like, after you have quit
        \appname, you can remove the now unneeded file
        \file{jpgfdraw.conf} and rename the directory \file{.flowframtk} or
        \file{flowframtk-settings}, as appropriate.

  \item If the directory \file{home/.flowframtk} exists
        and is a directory, that directory is used (where
        \meta{home} indicates the user's home directory as given
        by the Java \code{user.home} property).

  \item If the directory \file{home/flowframtk-settings} exists
        and is a directory, that directory is used.

  \item If the operating system (as identified by the Java \code{os.name}
        property) is a version of Windows and the
        directory \file{home/flowframtk-settings} can
        be created, that directory is used.

  \item For other operating systems, if the directory
        \file{home/.flowframtk} can be created, that
        directory is used.

  \item If the directory \file{settings/user} or
        \file{settings} can be created in \appname's
        installation directory, that directory will be used
        (where \meta{user} is the current user's user name). This is
        sub-optimal and not recommended as it may be removed when
        upgrading to a new version.

  \item If none of the above, an error will occur and you will need
        to set the environment variable \gls{JDRSETTINGS} to
        a sensible location with read and write permissions.

\end{itemize}

The configuration directory may also contain:
\begin{itemize}
\item the list of \hyperref[sec:recentfiles]{recent files}
(written by \appname\ when it quits normally);

\item the \hyperref[sec:accelerators]{accelerator settings}
file \file{accelerators.prop}
(written by \appname\ when it quits normally);

\item the \manmsg{maths}-mode and text-mode
\hyperref[sec:texconfigtext]{character mapping} files,
\file{mathmappings.prop} and \file{textmappings.prop}
(written by \appname\ when it quits normally);

\item the \hyperref[sec:preamble]{preamble} file \file{preamble.tex}
(created by you, if you want it, in any text editor) used by some of
the \hyperref[sec:exportimage]{export} functions
(see \sectionref{sec:texconfigpreamble});

\item the \file{languages.conf} file that stores the
\hyperref[sec:languages]{language settings} used for the resources and manual;

\item the \file{startup.conf} file that stores the names of the
fonts used by the \hyperref[sec:graphics]{startup splash screen};

\item the \file{latexfontmap.prop} file (created by you, if you want
it, in any text editor) that contains any \gls{font-mappings} (see
\sectionref{sec:fontfamily}).  For compatibility with
\gls{JpgfDraw}, the file may simply be \filefmt{latexfontmap}
without an extension.

\end{itemize}

In addition, the configuration directory is used to save the log
file, \file{flowframtk.log}, in the event that
\accelerator{menu.debug.writelog} is used (or \menu{debug.writelog}
if the command line option \switch{debug} is used). The emergency
save all function \accelerator{menu.debug.dumpall} (or
\menu{debug.dumpall} if the command line option \switch{debug} is
used) will create a subdirectory (using the current date and time to
construct the name) and will save all open images to that directory
with filenames of the form \file{imagen.jdr}.

\chapter{The Basics}\label{sec:thebasics}

\FloatFig
  {fig:mainwindow}
  {\includeimg[width=\linewidth]{jpdwindow}}
  {The Main Window}

\appname\ uses a \gls{mdi}. This means that you can have multiple
images loaded in separate child windows, without having to start up
new instances of \appname. Most of the buttons and menu items
will only be applied to the child window that currently has the
focus. If there are no child windows, or if they have all been
minimized, then the relevant buttons and menu items will be disabled.
The only exceptions are the non-\gls{canvas} specific items.
The main \appname\ window is shown in \figureref{fig:mainwindow}.


\section{The Canvas}\label{sec:thecanvas}

The \inlineglsdef{canvas} is the white area (that may optionally
have a~grid) in each of \appname's child windows on which you create
your picture. It shares a~child window with the
\hyperref[sec:thepreamblepane]{preamble editor pane}. The canvas and
preamble areas are separated by a divider that can be adjusted to
allow one side to take up more room in the window. This can be done
by dragging the divider.  With some \glspl{look-and-feel}, the
divider has small triangular buttons which you can click on to
collapse or expand one side, but not all have this function nor can
some of them completely hide the preamble pane (such as the GTK+
Look and Feel).  You can also use the \menu{tex.set_preamble} menu
item to show the preamble pane.

In \hyperref[sec:selectobjects]{select mode} (but not when you're editing or
distorting a shape) you can \gls{drag-and-drop} image files or
text onto the canvas to add to the current image. In
\hyperref[sec:newtext]{text or \manmsg{maths} mode} you can only drag
and drop text onto the canvas. If you attempt to drop a file
instead, you will get a new \gls{textarea} containing the file's
path (or URI). 

\section{The Preamble Pane}\label{sec:thepreamblepane}

The preamble pane by default is on the right of the \gls{canvas},
which may be used to specify code that should go in the document
preamble of exported files. (This includes exports that use \LaTeX\
as an intermediate step.)

This area is split into three tabs for the early preamble code,
the mid-preamble code, and the late preamble code.
See \sectionref{sec:preamble} for further details on how this
code is added during the export process, and
see \sectionref{sec:configureuidialog} to set a default preamble
for all images and to reposition the preamble pane.

\section{The Toolbars}\label{sec:thetoolbars}

There are two \inlineglspluraldef{toolbar}.  The horizontal toolbar positioned at
the top of the main window, which allows you to manipulate
\glspl{object} on the \gls{canvas} (as well as the save, load and
new buttons) and the vertical toolbar positioned to the left of the
main window, which you can use to create new \glspl{path} and
\glspl{textarea}. If a toolbar is too wide\slash tall, scroll buttons will
appear.

You can show or hide the \gls{toolbar} or change the location of
the vertical toolbar so that it appears on the right of \appname's
main window using the \widget{borders.title} tab in the
\dialog{configui} dialog.

The \hyperref[sec:thepreamblepane]{preamble pane} has its own
toolbar with buttons to edit the preamble text.


\section{The Rulers}\label{sec:therulers}

There are two \inlineglspluraldef{ruler}.The horizontal ruler
positioned above the \gls{canvas} which marks out the $x$-ticks, and
the vertical ruler positioned to the left of the \gls*{canvas} which
marks out the $y$-ticks. The gap between tick marks can be changed
using the \menu{settings.grid.settings} menu item.

You can show or hide the \glspl*{ruler} using the menu item
\menu{settings.rulers}.  You can adjust their size and number format
using the \widget{borders.title} tab in the \dialog{configui}
dialog box. When the rulers are visible, the grid unit is displayed
in the corner between the rulers. You can \gls{doubleclick} on this
corner to open the grid settings dialog.

\section{The Status Bar}\label{sec:thestatusbar}

\FloatFig
  {fig:statusbar}
  {\includeimg[width=\linewidth]{annoteStatusBar}}
  {The Status Bar}

The \inlineglsdef{statusbar} (\figureref{fig:statusbar}) is positioned along
the bottom of the main window. This has the following elements:

\begin{itemize}

\item The current position of the pointer (or the pointer's last
position before it was moved away from the \gls{canvas}). You can
\gls{doubleclick} on this area to open the \dialog{goto} dialog.

\item The \hyperref[sec:controlsettings]{storage unit}. You
can \gls{doubleclick} on this to open the storage unit selector.

\item The file status area.  If the current picture has been modified, it
will display the word \qt{\gls{info.modified}}, otherwise it
will be blank.

\item The grid lock indicator. This shows if the grid lock is on
\includeimg{key} or off \includeimg{keycross}. You can
\gls{doubleclick} on this area to toggle the grid lock setting as an
alternative to using the \menu{settings.grid.lock} menu item or
button.

\item The current magnification. You can adjust this value by
\glslink{click}{clicking} on the plus or minus icons to move up or
down the pre-defined list of zoom settings. Alternatively, in the area
between them where the magnification value is displayed, you can
\gls{menuclick} to popup a~menu or \gls{doubleclick} to open the
\dialog{zoom} dialog.

\item A help button \includeimg{statushelp} that you can \gls{click} on
to open the manual at the section related to the current operation.
This button is only present when the current operation has a section
in the manual.

\item A brief message about the currently selected tool or
operation. If the message is too long to fit in the provided area,
you can \gls{doubleclick} on it to open a dialog window with the
full message (\figureref{fig:information}).

\end{itemize}

\FloatFig
  {fig:information}
  {\includeimg{informationDialog}}
  {The Information Dialog}

You can show or hide the \gls*{statusbar}, or elements within the
bar, using the \dialog{configui} dialog. You can also use this
dialog to change the font used in the \gls*{statusbar}.


\chapter{The File Menu}\label{sec:filemenu}

\menudef{menu.file}

You can use the \menu{file} menu to create a
\hyperref[sec:newimage]{new} picture,
\hyperref[sec:loadimage]{load} a picture from a
\gls{JDR} or \gls{AJR} file,
\hyperref[sec:saveimage]{save} the current picture,
\hyperref[sec:exportimage]{export} the current
picture to a supported format (such as a \LaTeX\ file),
\hyperref[sec:imagedescription]{assign a description} to the
current picture, \hyperref[sec:print]{print} the
current picture or \hyperref[sec:quit]{quit} \appname.

\section{New}\label{sec:newimage}

\menudef{menu.file.new}

To start a new picture, select \menu{file.new}. This will open
a new child window. You can switch between child windows using the
\menu{window} menu.

\section{Open}\label{sec:loadimage}

\menudef{menu.file.open}

To load a \gls{JDR} or \gls{AJR} file, select \menu{file.open}.
If there is already a picture in the current child window, a new
child window will open to display the file. Note that although
\appname\ can export to other formats, it can only load
\gls{JDR} and \gls{AJR} files. (Although there is an import option
available in the experimental mode.)

If you load an image that contains a link to a \gls{bitmap} and
the bitmap is no longer in the same location, you will be prompted
for a new link or you can discard the link. Note that if you
select a new link, the \LaTeX\ link will also be updated.
If there is insufficient memory in the \gls{jre} to load a bitmap,
\appname\ will revert to draft mode for that bitmap.

On some systems you may be able to \gls{drag-and-drop} \gls{JDR} or
\gls{AJR} files from a filer window onto \appname's internal desktop
(the \manmsg{grey} background of \appname's main window) and this
will load each file into \appname. If you drag and drop a
\gls{bitmap} it will be equivalent to \hyperref[sec:newimage]{creating a
new image} and then \hyperref[sec:insertbitmap]{inserting the bitmap}.

For example, in \figureref{fig:dnda} three \gls{JDR} files and
a PNG file have been selected and then dragged onto \appname's
desktop, \figureref{fig:dndb}. This results in four child
windows, \figureref{fig:dndc}, where one of them is a new
untitled image with the link to the \gls{bitmap} inserted.

\FloatSubFigs{fig:dnd}
{
  {fig:dnda}{\includeimg{dnd1}}{},
  {fig:dndb}{\includeimg{dnd2}}{},
  {fig:dndc}{\includeimg{dnd3}}{}
}
{Drag and Drop onto \appname's Internal Desktop}

If you want to open an image in a new child window using drag and drop,
make sure you drop onto \appname's desktop. If you drop a file onto a
text area, such as the preamble pane or the text field used to
create a new \gls{textarea} then the filename (or URI) will be
inserted instead. If you drop onto a \gls{canvas}, the file contents
will be added to the current image (in the case of a \gls{JDR} or
\gls{AJR} file) or a link will inserted into the current image (in the
case of a \gls{bitmap} file). You can only drop a file onto the
\gls{canvas} in select mode (and no objects are being distorted or
edited).

\section{Recent Files}\label{sec:recentfiles}

\menudef{menu.file.recent}

To load a recently used \gls{JDR} or \gls{AJR} file, use the sub
menu \menu{file.recent}. A maximum of ten files, starting with the
most recently used are listed. Note that loading a file from this
list will change the open file chooser directory to that file's
directory.

\section{Image Description}\label{sec:imagedescription}

\menudef{menu.file.image_description}

You can use the \menu{file.image_description} dialog box to give the
image a description. The description is not visible in the image,
but is saved as a comment when you export the image to a \LaTeX\
document (see \sectionref{sec:exportdoc}). If you have the
\widget{clssettings.pdfinfo} option selected in the
\widget{clssettings.title} tab of the \dialog{texconfig} dialog box,
the image description will be added to an exported \LaTeX\ document
in the \gls{pdfinfo/Title} attribute of the \gls{pdfinfo} argument.

\section{Save and Save As}\label{sec:saveimage}

\menudef{menu.file.save}
\menudef{menu.file.save_as}

You can save the current picture in \appname's native
\gls{JDR} (binary) or \gls{AJR} (ASCII) format using either
\menu{file.save} (if it already has a name)
or \menu{file.save_as} (if you want to specify the
filename).  I strongly recommend that you save your work frequently.
There is no auto-save function. The \gls{JDR} format can store
higher precision values than the \gls{AJR} format.

\section{Export}\label{sec:exportimage}

\menudef{menu.file.export}

\begin{warning}
Note that \appname\ can't load the files that it can export, so I
strongly recommend that you first save the picture as a
\gls{JDR} or \gls{AJR} file before exporting it, in case you
wish to edit it later.
\end{warning}

The \menu{file.export} menu allows you to export your image. The
\inlineglsdef{export.title} dialog box provides a way to specify the name
and location of the file.  The file format for the exported file
depends on the selected file filter.  A default filename will be
provided with the same basename as the image (if it has one).

\subsection{Export to PNG}\label{sec:exportpng}

Select the \inlineglsdef{filter.png} file filter in the
\dialog{export} dialog box to export to a PNG file. This export type
ignores all \LaTeX\ settings. Once you have selected the destination
\inlineglsdef{ext.png} file, the \inlineglsdef{exportpng.title}
dialog box will open (see \figureref{fig:exportpngdialog}).

\FloatFig
  {fig:exportpngdialog}
  {\includeimg{exportpngdialog}}
  {Export to PNG Settings}

Select the \widget{exportpng.usealpha} box if you want a transparent
background. If the box isn't checked, the background will be white.

Select the \widget{exportpng.crop} box if you want the image cropped
to the image's bounding box. If the box isn't checked, the image
will be the same size as the paper size. 

Note that all \manmsgpl{colour} will be converted to RGB.
The resulting PNG image won't include the grid or any annotations
but will otherwise render as the image shown on the \gls{canvas}.

\subsection{Export to a \LaTeX\ Class or Package}\label{sec:exportsty}

Select the \widget{filter.cls} file filter in the
\dialog{export} dialog box to export to a \LaTeX\ class
(\inlineglsdef{ext.cls}) or selected the \widget{filter.sty}
file filter to export to a \LaTeX\ package (\inlineglsdef{ext.sty}).

The class or package will require the \sty{flowfram} package to
create the page layout defined by the image through the functions in
the \menu{tex.flowframe} menu.  The \sty{pgf} package will also be
required to create borders and backgrounds, where applicable.

Only \glspl{object} that have been identified as static, flow or
dynamic frames will be exported (see \sectionref{sec:flowframe}).
This means that you can create additional \glspl{object} for use as
guidelines and they won't be included in the class or package.

The settings provided in the \dialog{textconfig} configuration
will be used. If exporting to a class, the provided class will be
used as a basis (using \gls{LoadClass}). The class setting is
ignored when exporting to a package.

The early-\hyperref[sec:preamble]{preamble text} is added before the
start of the package option declarations, which provides a means to
add extra package options, if required.  The mid-preamble text will
be placed after the class or packages are loaded and the
end-preamble text is placed at the end of the class or package.

\begin{important}
The \hyperref[sec:texconfigpreamble]{default preamble} is not used
when exporting to a class or package.
\end{important}

Any occurrences of \gls{usepackage} in the image
preamble will be converted to \gls{RequirePackage} on export.

\seealsorefs{sec:texconfig,
sec:preamble,
sec:flowframe,
sec:houseexample,
sec:neuronexample,
sec:postertutorial,
sec:newstutorial}

\subsection{Export to PGF}\label{sec:exportpgf}

Select the \widget{filter.pgf} file filter in the \dialog{export}
dialog box to export to a \LaTeX\ file that contains a
\env{pgfpicture} environment, which can then be included into a
\LaTeX\ document using \gls{input}.

The start of the file will include comments with
code between an \csfmt{iffalse} \ldots\ \csfmt{fi} block
that may be required in your preamble. If necessary, copy that block
into your document's preamble.

If you want to create a standalone file, complete with a document
class and document environment, you will need the
\nameref{sec:exportdoc} function instead.

\seealsorefs{sec:texconfig,
sec:preamble,
sec:houseexample,
sec:neuronexample}

\subsection{Export to Single-Paged Document}\label{sec:exportdoc}

To create a standalone \LaTeX\ document (\inlineglsdef{ext.tex}), select
the \widget{filter.pgfdoc} file filter, which will use the image's
paper size, or select the \widget{filter.pgfencapdoc} file filter to
set the page geometry to the image's bounding box.

\begin{information}
For the encapsulated export function,
if the bounding box is smaller than the baselineskip, the page
height is set to the baselineskip, according to the given
\hyperref[sec:normalsize]{normal size} for the image.
\end{information}

Alternatively, select the \widget{filter.pdf} file filter to create
a \inlineglsdef{ext.pdf} file.  This function works by first creating a
standalone encapsulated \LaTeX\ document in a temporary file and
then compiling it with \app{pdflatex}. The temporary file (and any
associated files created in the process) will then be deleted.

If a default preamble has been set (see
\sectionref{sec:texconfigpreamble}) the code will be included in the
\ext{tex} file's preamble.  This is in
addition to the contents of the image's early-, mid- and
late-\hyperref[sec:preamble]{preamble}. For example, I have set the
default preamble to:
\begin{verbatim}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\end{verbatim}
If you prefer to use \sty{fontspec}, change the application path for
\app{pdflatex} to \app{lualatex}.

If your image includes \LaTeX\ commands that require a particular
package, you will need to add these packages to the
\hyperref[sec:preamble]{image preamble}. This is done automatically
by the mapping function, if it has been
\hyperref[mi:texmappings]{enabled}.  See
\sectionsref{sec:texconfigtext,sec:preamble} for further details.

\appname\ will automatically add
\verb|\usepackage{pgf}| to the preamble and other packages such as
\sty{geometry} and \sty{ifpdf}. It will also add
\begin{verbatim}
\usepgflibrary{decorations.text}
\end{verbatim}
in case the image contains any \glspl{textpath}.

\begin{warning}
Changes caused by differences in the way that \appname\ renders
\glspl{textarea} with the way that \LaTeX\ typesets them
can cause the image to be clipped if the bounding box
has been underestimated. If this is a problem, you can switch on
the \widget{clssettings.use_typeblock_as_bbox}
option and use the typeblock function to mark your
preferred bounding box.
\end{warning}

For example, in \figureref{fig:equation} I have a \gls{textarea} with the
alternative \LaTeX\ text set to:
\begin{verbatim}
$\displaystyle f(\boldsymbol{\Upupsilon}; \eta ) = 
\frac{1}{2}\eta \sum_k\boldsymbol{\upupsilon}_k\cdot 
\boldsymbol{\upupsilon}_k$
\end{verbatim}
Below this is a \gls{path} for illustrative purposes. When viewed in
\appname, as shown in \figureref{fig:equationa}, the
\gls*{textarea} and \gls*{path} are the same widths, but when the
image is exported to PDF, shown in \figureref{fig:equationb}, the
equation generated by the alternative text is wider that its
representation on the \gls{canvas} and has consequently been clipped
(both the top of the fraction and the right end of the equation)
because it exceeds the image bounding box that was computed by
\appname.

In \figureref{fig:equationc}, a rectangle has been
added to the image. This now extends the image bounding box, so when
the image is now exported to PDF, as shown in
\figureref{fig:equationd}, the equation is no longer clipped,
but the new rectangle is now visible, which may not be desirable.

There are two ways to deal with this. The first is to give the
rectangle a transparent line \manmsg{colour} (in addition to the
transparent fill \manmsg{colour}) but now it can only been detected on the
\gls{canvas} when it's selected. The second method is to set the
typeblock to the area of that rectangle (see \sectionref{sec:typeblock}).
The easiest way to do this is to select the rectangle, use the
\menu{tex.flowframe.set_typeblock} menu item to open the
\dialog{typeblock} dialog box, and click on the
\widget{typeblock.compute_from_path} button. Then delete the
rectangle. The typeblock is now shown as a grey rectangle in
\figureref{fig:equatione}. Now make sure that the
\widget{clssettings.use_typeblock_as_bbox}
setting is on. Redoing the export to PDF now
produces the image shown in \figureref{fig:equationf}.

\FloatSubFigs{fig:equation}
{
 {fig:equationa}{\includeimg[scale=0.7]{equationa}}{},
 {fig:equationb}{\includeimg[scale=0.7]{equationb}}{},
 {fig:equationc}{\includeimg[scale=0.7]{equationc}}{},
 {fig:equationd}{\includeimg[scale=0.7]{equationd}}{},
 {fig:equatione}{\includeimg[scale=0.7]{equatione}}{},
 {fig:equationf}{\includeimg[scale=0.7]{equationf}}{}
}
[Exported Text Areas Can Overflow Bounding Box]
{Exported Text Areas Can Overflow Bounding Box:
\subfigref{fig:equationa} image as shown on canvas;
\subfigref{fig:equationb} image exported to PDF (equation has been clipped);
\subfigref{fig:equationc} rectangle added to image;
\subfigref{fig:equationd} image from \subfigref{fig:equationc} exported to PDF;
\subfigref{fig:equatione} typeblock added and rectangle removed;
\subfigref{fig:equationf} image from \subfigref{fig:equatione} exported to PDF.}

If the exported PDF file has unexpected results or fails to be
created, try exporting to an encapsulated \LaTeX\ document and then
manually building the document, as the issue may be due to the
conversion process or it may be due to an unrecognised command or
syntax error in a \gls{textarea} or \gls{textpath}.

\seealsorefs{sec:texconfig,sec:preamble,sec:fontanchor}

\subsection{Export to SVG or EPS}\label{sec:exportsvgeps}

The export to SVG or EPS functions both work in the same way
as \hyperref[sec:exportdoc]{exporting to an encapsulating PDF}
in that a temporary encapsulated \LaTeX\ file is first created.

If the \widget{filter.svg} file filter is chosen, then the temporary
file will be compiled with \app{latex} followed by
\app{dvisvgm} to created an  \inlineglsdef{ext.svg} file.

If the \widget{filter.eps} file filter is chosen, then the temporary
file will be compiled with \app{latex} followed by
\app{dvips} to created an \inlineglsdef{ext.eps} file.

In either case, if the image contains any
\glspl{bitmap}, \appname\ will attempt to convert
them to EPS, where necessary.

\begin{important}
Note that PostScript does not support transparency.
\end{important}

As with the export to encapsulated PDF, if the resulting SVG or EPS
file has unexpected results or fails to be created, try exporting to
an encapsulated \LaTeX\ document and then manually building the
document.

\section{Page Setup}\label{sec:pagesetup}

\menudef{menu.file.page}

The \menu{file.page} menu item will open the printer's page
setup dialog box. This will require a print service to be available.
The page margins will be shown on the \gls{canvas} if the
\menu{settings.paper.margins} menu item is selected.

\section{Print}\label{sec:print}

\menudef{menu.file.print}

You can print the current image using the \menu{file.print} menu
item which will open the printer dialog box. If no printer is found,
the error message \qt{\errmsg{printing.no_service}} will
be displayed. If this happens, check that the printer is switched
on and connected to the computer. The print function uses the
\gls{canvas}['s] \gls{rendering} and \gls{anti-aliasing} settings
(provided in the \dialog{graphics} configuration) and draws
the image as it's displayed on the \gls{canvas} (at 100\%
magnification and without the grid or annotations).

\section{Message Window}\label{sec:messages}

\menudef{menu.file.messages}

You can display the \inlineglsdef{message.title} window using the
\menu{file.messages} item. This usually just lists the
files that have been opened, saved or exported, but warnings are
sometimes written there as well. This window is opened during a read
or write operation. When an external application is spawned, the
abort button becomes enabled, which you can use to kill the spawned
process if required.

\section{Close}\label{sec:closeimage}

\menudef{menu.file.close}

You can close the current child window, either by clicking on the
child window's close icon or by selecting \menu{file.close}.
If there is any unsaved data, \appname\ will ask for confirmation
before discarding the window (see \figureref{fig:confirmclose1}).
In this dialog box you can:

\begin{deflist}
\itemtitle{\includeimg{discard}}

\begin{itemdesc}
click on the discard button next to the image name to discard the
image;
\end{itemdesc}

\itemtitle{\includeimg{save}}

\begin{itemdesc}
click on the save button next to the image name to save the image;
\end{itemdesc}

\itemtitle{\includeimg{cancel}}

\begin{itemdesc}
click on the cancel button at the bottom of the dialog box to cancel
the close operation.
\end{itemdesc}

\end{deflist}

\FloatFig
  {fig:confirmclose1}
  {\includeimg{confirmclose1}}
  {Confirm Discard Dialog (1 Modified Image).}

An image will only be marked as unmodified if it has been saved as a
\gls{JDR} or \gls{AJR} file.  If you have
\hyperref[sec:exportimage]{exported} your image to another file
type, I recommend that you also \hyperref[sec:saveimage]{save} it as
a \gls{JDR} file as well, in case you want to edit it later.

Note that you must finish or discard any \gls{path} that is under
\hyperref[sec:newobjects]{construction} before you can close
an image.

\section{Quit}\label{sec:quit}

\menudef{menu.file.quit}

To quit \appname\ either use the menu item
\menu{file.quit} or click on the close icon on the
main window. All child frames will be closed. If any child frame
contains unsaved data, you will be asked for confirmation before
the window is discard. If there is only one modified image, the
dialog box is as for the \hyperref[sec:closeimage]{close operation} shown in
\figureref{fig:confirmclose1}, otherwise it's as shown in
\figureref{fig:confirmclose2}, where each modified file is listed.

\FloatFig
  {fig:confirmclose2}
  {\includeimg{confirmclose2}}
  {Confirm Discard Dialog (2 Modified Images).}

As with the close operation, for each listed file, you can:
\begin{deflist}
\itemtitle{\includeimg{save}}

\begin{itemdesc}
click on the save button next to the image name to save the image;
\end{itemdesc}

\itemtitle{\includeimg{discard}}

\begin{itemdesc}
click on the discard button next to the image name to discard the
image.
\end{itemdesc}

\end{deflist}

Alternatively you can:
\begin{deflist}
\itemtitle{\includeimg{save_all}}

\begin{itemdesc}
click on the save all button to save all the listed files;
\end{itemdesc}

\itemtitle{\includeimg{discard_all}}

\begin{itemdesc}
click on the discard all button to discard all the listed files and
quit;
\end{itemdesc}

\itemtitle{\includeimg{cancel}}

\begin{itemdesc}
click on the cancel button at the bottom of the dialog box to cancel
the quit operation.
\end{itemdesc}

\end{deflist}

\chapter{Creating New Objects}\label{sec:newobjects}

TODO

\plabel[Go To Dialog Box]{sec:goto}% 

TODO

\section{Line Paths}\label{sec:newlinepath}

TODO

\section{Curve Paths}\label{sec:newcurvepath}

TODO


\section{Rectangles}\label{sec:rectangles}

TODO


\section{Ellipses}\label{sec:ellipses}

TODO


\section{Text}\label{sec:newtext}

TODO


\chapter{Bitmaps}\label{sec:insertbitmap}

\inlineglsdef{bitmap}

TODO


\section{Properties}\label{sec:bitmapprops}

TODO


\section{Vectorizing}\label{sec:vectorize}

TODO


\chapter{Selecting and Editing Objects}\label{sec:selectobjects}

TODO


\section{Moving an Object}\label{sec:moveobjects}

TODO


\section{Cut}\label{sec:cutobjects}

TODO


\section{Copy}\label{sec:copyobjects}

TODO


\section{Paste}\label{sec:pasteobjects}

TODO


\section{Object Description}\label{sec:objectdescription}

TODO


\section{Editing Control Points}\label{sec:editpath}

TODO

\plabel[Breaking a Path]{mi:breakpath}

TODO

\section{Symmetric Shapes}\label{sec:symmetric}

TODO


\section{Editing Text Areas}\label{sec:edittext}

TODO

\plabel[Insert Symbol Dialog Box]{mi:insertsymbol}%


TODO


\section{Combining a Text Area and Path to Form a Text-Path}\label{sec:textpath}

TODO


\section{Text Outlines}\label{sec:textoutline}

TODO


\section{Reducing to Gray Scale}\label{sec:reduce}

TODO


\section{Color Space Conversions}\label{sec:convertcolspace}

TODO


\section{Fade}\label{sec:fade}

TODO


\section{Removing Translucency}\label{sec:removetrans}

TODO


\section{Moving an Object Up or Down the Stacking Order}\label{sec:moveupordown}

TODO


\section{Rotating Objects}\label{sec:rotateobjects}

TODO


\section{Scaling Objects}\label{sec:scaleobjects}

TODO


\section{Shearing Objects}\label{sec:shearobjects}

TODO


\section{Distorting Shapes}\label{sec:distort}

TODO


\section{Grouping and Ungrouping Objects}\label{sec:grouping}

TODO


\section{Aligning Objects}\label{sec:alignobjects}

TODO


\section{Reversing a Path's Direction}\label{sec:reversing}

TODO


\section{Merging Paths}\label{sec:mergepaths}

TODO


\section{Path Union}\label{sec:pathunion}

TODO


\section{Exclusive Or Function}\label{sec:xorpath}

TODO


\section{Path Intersection}\label{sec:pathintersect}

TODO


\section{Path Subtraction}\label{sec:pathsubtract}

TODO


\section{Separating a Text-Path into a Text Area and Path}\label{sec:separate}

TODO


\section{Converting a Path or Text-Path into a Pattern}\label{sec:patterns}

TODO


\section{Converting to a Path}\label{sec:converttopath}

TODO


\section{Converting a Text Area, Text-Path or Pattern to a Path}\label{sec:texttopath}

TODO


\section{Converting an Outline to a Path}\label{sec:outlinetopath}

TODO


\section{Splitting Text Areas}\label{sec:splittext}

TODO


\chapter{Path and Text Styles}\label{sec:styles}

TODO


\section{Line Color}\label{sec:linepaint}

TODO


\section{Fill Color}\label{sec:fillpaint}

TODO


\section{Line Style}\label{sec:pathstyle}

TODO


\subsection{Line Thickness (or Pen Width)}\label{sec:penwidth}

TODO


\subsection{Dash Pattern}\label{sec:dashpattern}

TODO


\subsection{Cap Style}\label{sec:capstyle}

TODO


\subsection{Join Style}\label{sec:joinstyle}

TODO


\subsection{Markers}\label{sec:markers}

TODO


\subsubsection{Enabling or Disabling a Marker}\label{sec:enablingmarkers}

TODO


\subsubsection{Marker Types}\label{sec:markertypes}

TODO


\subsubsection{Marker Size}\label{sec:markersize}

TODO


\subsubsection{Repeating Markers}\label{sec:repeatingmarkers}

TODO


\subsubsection{Reversing Markers}\label{sec:reversingmarkers}

TODO


\subsubsection{Composite Markers}\label{sec:compositemarkers}

TODO


\subsubsection{Marker Orientation}\label{sec:markerorientation}

TODO


\subsubsection{Marker Offset}\label{sec:markeroffset}

TODO


\subsubsection{Repeat Gap}\label{sec:repeatgap}

TODO


\subsubsection{Marker Color}\label{sec:markerpaint}

TODO


\subsection{Winding Rule}\label{sec:winding}

TODO


\section{Text Color}\label{sec:textpaint}

TODO


\section{Text Style}\label{sec:textstyle}

TODO


\subsection{Font Family}\label{sec:fontfamily}

TODO


\subsection{Font Size}\label{sec:fontsize}

TODO


\subsection{Font Series}\label{sec:fontseries}

TODO


\subsection{Font Shape}\label{sec:fontshape}

TODO


\subsection{Text Transformation Matrix}\label{sec:textmatrix}

TODO


\subsection{Anchor}\label{sec:fontanchor}

TODO


\chapter{\TeX/\LaTeX}\label{sec:tex}

TODO


\section{Adding Commands to the Preamble}\label{sec:preamble}

TODO


\section{Computing the Parameters for \glsfmttext{parshape}}\label{sec:parshape}

TODO


\section{Computing the Parameters for \glsfmttext{shapepar} or
\glsfmttext{Shapepar}}
\label{sec:shapepar}

TODO


\section{Creating Frames for Use with the \stytext{flowfram} Package}
\label{sec:flowframe}

TODO


\subsection{The \stytext{flowfram} Package: A Brief Summary}
\label{sec:flowframesummary}

TODO


\subsection{Defining the Typeblock}\label{sec:typeblock}

TODO


\subsection{Defining a Frame}\label{sec:framedef}

TODO


\subsection{The Frame Shape}\label{sec:frameshape}

TODO


\subsection{Scale Object to Fit Typeblock}\label{sec:scaletotypeblock}

TODO


\subsection{Only Displaying Objects Defined on a Given Page}\label{sec:displaypage}

TODO


\chapter{Step-by-Step Examples}\label{sec:tutorials}

TODO


\section{A House}\label{sec:houseexample}

TODO


\section{Lettuce on Toast}\label{sec:toastexample}

TODO


\section{Cheese and Lettuce on Toast}\label{sec:cheeseexample}

TODO


\section{An Artificial Neuron}\label{sec:neuronexample}

TODO


\section{Bus}\label{sec:busexample}

TODO


\section{A Poster}\label{sec:postertutorial}

TODO


\section{A Newspaper}\label{sec:newstutorial}

TODO


\section{A Brochure}\label{sec:brochure}

TODO


\section{A House With No Mouse}\label{sec:accesstutorial}

TODO


\section{A Lute Rose}\label{sec:rosetutorial}

TODO


\chapter{JDR/AJR File Formats}\label{sec:jdrajrformat}

TODO


\chapter{Help Windows}
\label{sec:helpwindows}

\menudef{menu.help.about}

The \menu{help.about} menu item shows the \inlineglsdef{about.title}
dialog with version details.

\menudef{menu.help.license}

The \menu{help.license} menu item shows the \inlineglsdef{license.title}
dialog (see \sectionref{sec:licence}).

\input{helpinterface}

\chapter{Multilingual Support}\label{sec:multilingualsupport}

TODO


\chapter{Source Code}\label{sec:sourcecode}

TODO


\section{Java Source}\label{sec:javasource}

TODO


\section{Document Source}\label{sec:docsource}

TODO


\chapter{Troubleshooting}\label{sec:troubleshooting}

TODO


\section{Known Bugs}\label{sec:knownbugs}

TODO

\chapter{\MFUsentencecase{\glsentrytext{index.licence}}}
\label{sec:licence}

\glsadd{index.licence}%
\appname\ is licensed under the terms of the 
\href{https://www.gnu.org/licenses/gpl-3.0.html}{GNU General
Public License version 3 (GPLv3)}.
\appname\ depends on the following third party library whose
jar file is in the \filefmt{lib} directory:
\begin{itemize}
   \item TeX Java Help \filefmt{texjavahelplib.jar}
   (GPL, \url{https://github.com/nlct/texjavahelp}).
\end{itemize}


\listentrydescendents
 [title={Summary of \apptext{flowframtk} Switches}]
 {app.flowframtk}

\printmain
\printindex 

\end{document} 

